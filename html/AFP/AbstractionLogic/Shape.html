<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

<head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"/><link rel="stylesheet" type="text/css" href="isabelle.css"/>
<title>Theory Shape</title>
</head>


<body>
<div class="head">
<h1>Theory Shape</h1>
</div>

<pre class="source"><span class="keyword1"><span class="command"><span>theory</span></span></span><span> </span><span>Shape</span><span> </span><span class="keyword2"><span class="keyword"><span>imports</span></span></span><span> </span><a href="General.html"><span>General</span></a><span>
</span><span class="keyword2"><span class="keyword"><span>begin</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>section</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>‹</span><span>Shape</span><span>›</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>subsection</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>‹</span><span>Preshapes</span><span>›</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>type_synonym</span></span></span><span> </span><span class="entity_def" id="Shape.preshape|type"><span>preshape</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span>nat</span><span> </span><span>set</span><span class="main"><span>)</span></span><span> </span><span>list</span><span>"</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="Shape.preshape_alldeps_def|fact"><span class="entity_def" id="Shape.preshape_alldeps_def|thm"><span class="entity_def" id="Shape.preshape_alldeps_def_raw|axiom"><span>definition</span></span></span></span></span></span><span> </span><span class="entity"><span class="entity_def" id="Shape.preshape_alldeps|const"><span>preshape_alldeps</span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Shape.html#Shape.preshape|type"><span>preshape</span></a><span> </span><span class="main"><span>⇒</span></span><span> </span><span>nat</span><span> </span><span>set</span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span>
  </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>preshape_alldeps</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>s</span></span></span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>⋃</span></span><span> </span><span class="main"><span>{</span></span><span class="free"><span class="bound"><span class="entity"><span>s</span></span></span></span><span> </span><span class="main"><span>!</span></span><span> </span><span class="bound"><span>i</span></span><span> </span><span class="main"><span>|</span></span><span> </span><span class="bound"><span>i</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>i</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>length</span><span> </span><span class="free"><span class="bound"><span class="entity"><span>s</span></span></span></span><span class="main"><span>}</span></span><span>"</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="Shape.wellformed_preshape_def|fact"><span class="entity_def" id="Shape.wellformed_preshape_def|thm"><span class="entity_def" id="Shape.wellformed_preshape_def_raw|axiom"><span>definition</span></span></span></span></span></span><span> </span><span class="entity"><span class="entity_def" id="Shape.wellformed_preshape|const"><span>wellformed_preshape</span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Shape.html#Shape.preshape|type"><span>preshape</span></a><span> </span><span class="main"><span>⇒</span></span><span> </span><span>bool</span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span>
  </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>wellformed_preshape</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>s</span></span></span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>∃</span></span><span> </span><span class="bound"><span>m</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="General.html#General.nats|const"><span>nats</span></a><span> </span><span class="bound"><span>m</span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="Shape.html#Shape.preshape_alldeps|const"><span>preshape_alldeps</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>s</span></span></span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Shape.wellformed_preshape_empty|fact"><span class="entity_def" id="Shape.wellformed_preshape_empty|thm"><span>wellformed_preshape_empty</span></span></span><span class="main"><span>[</span></span><span class="operator"><span>intro</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Shape.html#Shape.wellformed_preshape|const"><span>wellformed_preshape</span></a><span> </span><span class="main"><span>[]</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="General.html#General.nats_def|fact"><span>nats_def</span></a><span> </span><a class="entity_ref" href="Shape.html#Shape.preshape_alldeps_def|fact"><span>preshape_alldeps_def</span></a><span> </span><a class="entity_ref" href="Shape.html#Shape.wellformed_preshape_def|fact"><span>wellformed_preshape_def</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>

</span><span class="keyword1"><span class="command"><span>subsection</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>‹</span><span>Shapes are Wellformed Preshapes</span><span>›</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="Shape.arity_typerep_shape|fact"><span class="entity_def" id="Shape.typerep_shape_def|fact"><span class="entity_def" id="Shape.typerep_shape_inst.typerep_shape|fact"><span class="entity_def" id="Shape.shape.type_definition_shape|fact"><span class="entity_def" id="Shape.arity_type_shape|fact"><span class="entity_def" id="Shape.arity_typerep_shape|thm"><span class="entity_def" id="Shape.typerep_shape_def|thm"><span class="entity_def" id="Shape.typerep_shape_inst.typerep_shape|thm"><span class="entity_def" id="Shape.shape.type_definition_shape|thm"><span class="entity_def" id="Shape.arity_type_shape|thm"><span class="entity_def" id="Shape.typerep_shape_def_raw|axiom"><span class="entity_def" id="Shape.typerep_shape_inst.typerep_shape_def|axiom"><span class="entity_def" id="Shape.shape.type_definition_shape|axiom"><span class="entity_def" id="Shape.arity_type_shape|axiom"><span class="entity_def" id="Shape.typerep_shape_inst.typerep_shape|const"><span>typedef</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span> </span><span class="entity_def" id="Shape.shape|type"><span>shape</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>{</span></span><span class="bound"><span>s</span></span><span> </span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="Shape.html#Shape.wellformed_preshape|const"><span>wellformed_preshape</span></a><span> </span><span class="bound"><span>s</span></span><span class="main"><span>}</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>morphisms</span></span></span><span> </span><span class="entity_def" id="Shape.shape.Preshape_induct|fact"><span class="entity_def" id="Shape.shape.Preshape_cases|fact"><span class="entity_def" id="Shape.shape.Preshape_inject|fact"><span class="entity_def" id="Shape.shape.Preshape_inverse|fact"><span class="entity_def" id="Shape.shape.Preshape|fact"><span class="entity_def" id="Shape.shape.Preshape_induct|thm"><span class="entity_def" id="Shape.shape.Preshape_cases|thm"><span class="entity_def" id="Shape.shape.Preshape_inject|thm"><span class="entity_def" id="Shape.shape.Preshape_inverse|thm"><span class="entity_def" id="Shape.shape.Preshape|thm"><span class="entity_def" id="Shape.shape.Preshape|const"><span>Preshape</span></span></span></span></span></span></span></span></span></span></span></span><span> </span><span class="entity_def" id="Shape.shape.Shape_induct|fact"><span class="entity_def" id="Shape.shape.Shape_cases|fact"><span class="entity_def" id="Shape.shape.Shape_inject|fact"><span class="entity_def" id="Shape.shape.Shape_inverse|fact"><span class="entity_def" id="Shape.shape.Shape_induct|thm"><span class="entity_def" id="Shape.shape.Shape_cases|thm"><span class="entity_def" id="Shape.shape.Shape_inject|thm"><span class="entity_def" id="Shape.shape.Shape_inverse|thm"><span class="entity_def" id="Shape.shape.Shape|const"><span>Shape</span></span></span></span></span></span></span></span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Shape.wellformed_Preshape|fact"><span class="entity_def" id="Shape.wellformed_Preshape|thm"><span>wellformed_Preshape</span></span></span><span class="main"><span>[</span></span><span class="operator"><span>iff</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Shape.html#Shape.wellformed_preshape|const"><span>wellformed_preshape</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Shape.html#Shape.shape.Preshape|const"><span>Preshape</span></a><span> </span><span class="free"><span>s</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Shape.html#Shape.shape.Preshape|fact"><span>Preshape</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>

</span><span class="keyword1"><span class="command"><span>subsection</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>‹</span><span>Valence and Arity</span><span>›</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="Shape.shape_valence_def|fact"><span class="entity_def" id="Shape.shape_valence_def|thm"><span class="entity_def" id="Shape.shape_valence_def_raw|axiom"><span>definition</span></span></span></span></span></span><span> </span><span class="entity"><span class="entity_def" id="Shape.shape_valence|const"><span>shape_valence</span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Shape.html#Shape.shape|type"><span>shape</span></a><span> </span><span class="main"><span>⇒</span></span><span> </span><span>nat</span><span>"</span></span></span><span> </span><span class="main"><span>(</span></span><span class="quoted"><span>"</span><span class="keyword1"><span>§val</span></span><span>"</span></span><span class="main"><span>)</span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span>
  </span><span class="quoted"><span class="quoted"><span>"</span><span class="keyword1"><span class="free"><span>§val</span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>s</span></span></span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>(</span></span><span class="keyword1"><span>THE</span></span><span> </span><span class="bound"><span>m</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="General.html#General.nats|const"><span>nats</span></a><span> </span><span class="bound"><span>m</span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="Shape.html#Shape.preshape_alldeps|const"><span>preshape_alldeps</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Shape.html#Shape.shape.Preshape|const"><span>Preshape</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>s</span></span></span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="Shape.shape_arity_def|fact"><span class="entity_def" id="Shape.shape_arity_def|thm"><span class="entity_def" id="Shape.shape_arity_def_raw|axiom"><span>definition</span></span></span></span></span></span><span> </span><span class="entity"><span class="entity_def" id="Shape.shape_arity|const"><span>shape_arity</span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Shape.html#Shape.shape|type"><span>shape</span></a><span> </span><span class="main"><span>⇒</span></span><span> </span><span>nat</span><span>"</span></span></span><span> </span><span class="main"><span>(</span></span><span class="quoted"><span>"</span><span class="keyword1"><span>§ar</span></span><span>"</span></span><span class="main"><span>)</span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span>
  </span><span class="quoted"><span class="quoted"><span>"</span><span class="keyword1"><span class="free"><span>§ar</span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>s</span></span></span></span><span> </span><span class="main"><span>=</span></span><span> </span><span>length</span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Shape.html#Shape.shape.Preshape|const"><span>Preshape</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>s</span></span></span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Shape.preshape_alldeps|fact"><span class="entity_def" id="Shape.preshape_alldeps|thm"><span>preshape_alldeps</span></span></span><span class="main"><span>[</span></span><span class="operator"><span>intro</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Shape.html#Shape.wellformed_preshape|const"><span>wellformed_preshape</span></a><span> </span><span class="free"><span>s</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><span class="main"><span>∃</span></span><span> </span><span class="bound"><span>m</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="General.html#General.nats|const"><span>nats</span></a><span> </span><span class="bound"><span>m</span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="Shape.html#Shape.preshape_alldeps|const"><span>preshape_alldeps</span></a><span> </span><span class="free"><span>s</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Shape.html#Shape.wellformed_preshape_def|fact"><span>wellformed_preshape_def</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Shape.preshape_valence|fact"><span class="entity_def" id="Shape.preshape_valence|thm"><span>preshape_valence</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Shape.html#Shape.preshape_alldeps|const"><span>preshape_alldeps</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Shape.html#Shape.shape.Preshape|const"><span>Preshape</span></a><span> </span><span class="free"><span>s</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="General.html#General.nats|const"><span>nats</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Shape.html#Shape.shape_valence|const"><span>shape_valence</span></a><span> </span><span class="free"><span>s</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><span class="main"><span class="main"><span>(</span></span></span><span>mono_tags</span><span class="main"><span class="main"><span>,</span></span></span><span> lifting</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="General.html#General.nats_eq_nats|fact"><span>nats_eq_nats</span></a><span> </span><a class="entity_ref" href="Shape.html#Shape.shape_valence_def|fact"><span>shape_valence_def</span></a><span> </span><span>the_equality</span><span> 
      </span><a class="entity_ref" href="Shape.html#Shape.wellformed_Preshape|fact"><span>wellformed_Preshape</span></a><span> </span><a class="entity_ref" href="Shape.html#Shape.wellformed_preshape_def|fact"><span>wellformed_preshape_def</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Shape.empty_deps_Shape_valence|fact"><span class="entity_def" id="Shape.empty_deps_Shape_valence|thm"><span>empty_deps_Shape_valence</span></span></span><span class="main"><span>:</span></span><span> 
  </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Shape.html#Shape.preshape_alldeps|const"><span>preshape_alldeps</span></a><span> </span><span class="free"><span>s</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>{}</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Shape.html#Shape.shape_valence|const"><span>shape_valence</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Shape.html#Shape.shape.Shape|const"><span>Shape</span></a><span> </span><span class="free"><span>s</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>0</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><span>CollectI</span><span> </span><a class="entity_ref" href="Shape.html#Shape.shape.Shape_inverse|fact"><span>Shape_inverse</span></a><span> </span><a class="entity_ref" href="General.html#General.nats_0|fact"><span>nats_0</span></a><span> </span><a class="entity_ref" href="General.html#General.nats_eq_nats|fact"><span>nats_eq_nats</span></a><span> </span><a class="entity_ref" href="Shape.html#Shape.preshape_valence|fact"><span>preshape_valence</span></a><span> </span><a class="entity_ref" href="Shape.html#Shape.wellformed_preshape_def|fact"><span>wellformed_preshape_def</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Shape.nonempty_deps_Shape_valence|fact"><span class="entity_def" id="Shape.nonempty_deps_Shape_valence|thm"><span>nonempty_deps_Shape_valence</span></span></span><span class="main"><span>:</span></span><span> 
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span>wf</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Shape.html#Shape.wellformed_preshape|const"><span>wellformed_preshape</span></a><span> </span><span class="free"><span>s</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span>nonemtpy</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Shape.html#Shape.preshape_alldeps|const"><span>preshape_alldeps</span></a><span> </span><span class="free"><span>s</span></span><span> </span><span class="main"><span>≠</span></span><span> </span><span class="main"><span>{}</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Shape.html#Shape.shape_valence|const"><span>shape_valence</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Shape.html#Shape.shape.Shape|const"><span>Shape</span></a><span> </span><span class="free"><span>s</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>1</span></span><span> </span><span class="main"><span>+</span></span><span> </span><span>Max</span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Shape.html#Shape.preshape_alldeps|const"><span>preshape_alldeps</span></a><span> </span><span class="free"><span>s</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span> 
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>∃</span></span><span> </span><span class="bound"><span>m</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="Shape.html#Shape.preshape_alldeps|const"><span>preshape_alldeps</span></a><span> </span><span class="free"><span>s</span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="General.html#General.nats|const"><span>nats</span></a><span> </span><span class="bound"><span>m</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><span>wf</span><span> </span><a class="entity_ref" href="Shape.html#Shape.wellformed_preshape_def|fact"><span>wellformed_preshape_def</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>blast</span></span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>obtain</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>m</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Shape.html#Shape.preshape_alldeps|const"><span>preshape_alldeps</span></a><span> </span><span class="free"><span>s</span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="General.html#General.nats|const"><span>nats</span></a><span> </span><span class="skolem"><span>m</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>blast</span></span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="General.html#General.Max_nats|fact"><span>Max_nats</span></a><span> </span><span>wf</span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><span>CollectI</span><span> </span><a class="entity_ref" href="General.html#General.nats_0|fact"><span>nats_0</span></a><span> </span><span>nonemtpy</span><span> </span><a class="entity_ref" href="Shape.html#Shape.preshape_valence|fact"><span>preshape_valence</span></a><span> </span><a class="entity_ref" href="Shape.html#Shape.shape.Shape_inverse|fact"><span>Shape_inverse</span></a><span> </span><span>zero_less_iff_neq_zero</span><span class="main"><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Shape.Shape_arity|fact"><span class="entity_def" id="Shape.Shape_arity|thm"><span>Shape_arity</span></span></span><span class="main"><span>[</span></span><span class="operator"><span>intro</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Shape.html#Shape.wellformed_preshape|const"><span>wellformed_preshape</span></a><span> </span><span class="free"><span>s</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><a class="entity_ref" href="Shape.html#Shape.shape_arity|const"><span>shape_arity</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Shape.html#Shape.shape.Shape|const"><span>Shape</span></a><span> </span><span class="free"><span>s</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span>length</span><span> </span><span class="free"><span>s</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Shape.html#Shape.shape.Shape_inverse|fact"><span>Shape_inverse</span></a><span> </span><a class="entity_ref" href="Shape.html#Shape.shape_arity_def|fact"><span>shape_arity_def</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>subsection</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>‹</span><span>Dependencies</span><span>›</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="Shape.shape_deps_def|fact"><span class="entity_def" id="Shape.shape_deps_def|thm"><span class="entity_def" id="Shape.shape_deps_def_raw|axiom"><span>definition</span></span></span></span></span></span><span> </span><span class="entity"><span class="entity_def" id="Shape.shape_deps|const"><span>shape_deps</span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Shape.html#Shape.shape|type"><span>shape</span></a><span> </span><span class="main"><span>⇒</span></span><span> </span><span>nat</span><span> </span><span class="main"><span>⇒</span></span><span> </span><span>nat</span><span> </span><span>set</span><span>"</span></span></span><span> </span><span class="main"><span>(</span></span><span class="keyword2"><span class="keyword"><span>infixl</span></span></span><span> </span><span class="quoted"><span>"</span><span class="keyword1"><span>.♮</span></span><span>"</span></span><span> 100</span><span class="main"><span>)</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span class="bound"><span class="entity"><span>s</span></span></span></span><span class="main"><span class="free"><span>.♮</span></span></span><span class="free"><span class="bound"><span class="entity"><span>i</span></span></span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Shape.html#Shape.shape.Preshape|const"><span>Preshape</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>s</span></span></span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>!</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>i</span></span></span></span><span>"</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>abbreviation</span></span></span><span> </span><span class="entity"><span class="entity_def" id="Shape.shape_select_deps|const"><span>shape_select_deps</span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Shape.html#Shape.shape|type"><span>shape</span></a><span> </span><span class="main"><span>⇒</span></span><span> </span><span>nat</span><span> </span><span class="main"><span>⇒</span></span><span> </span><span class="main"><span>(</span></span><span class="tfree"><span>'a</span></span><span> </span><span>list</span><span> </span><span class="main"><span>⇒</span></span><span> </span><span class="tfree"><span>'a</span></span><span> </span><span>list</span><span class="main"><span>)</span></span><span>"</span></span></span><span> </span><span class="main"><span>(</span></span><span class="quoted"><span>"</span><span>_</span><span class="keyword1"><span>.@</span></span><span>_</span><span class="keyword1"><span>'(</span></span><span>_</span><span class="keyword1"><span>')</span></span><span>"</span></span><span> </span><span class="main"><span>[</span></span><span>100</span><span class="main"><span>,</span></span><span> 101</span><span class="main"><span>,</span></span><span> 0</span><span class="main"><span>]</span></span><span> 100</span><span class="main"><span>)</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span class="bound"><span class="entity"><span>s</span></span></span></span><span class="main"><span class="free"><span>.@</span></span></span><span class="free"><span class="bound"><span class="entity"><span>i</span></span></span></span><span class="main"><span class="free"><span>(</span></span></span><span class="free"><span class="bound"><span class="entity"><span>xs</span></span></span></span><span class="main"><span class="free"><span>)</span></span></span><span> </span><span class="main"><span>≡</span></span><span> </span><span>nths</span><span> </span><span class="free"><span class="bound"><span class="entity"><span>xs</span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span class="bound"><span class="entity"><span>s</span></span></span></span><span class="main"><a class="entity_ref" href="Shape.html#Shape.shape_deps|const"><span>.♮</span></a></span><span class="free"><span class="bound"><span class="entity"><span>i</span></span></span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>abbreviation</span></span></span><span> </span><span class="entity"><span class="entity_def" id="Shape.shape_deps_card|const"><span>shape_deps_card</span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Shape.html#Shape.shape|type"><span>shape</span></a><span> </span><span class="main"><span>⇒</span></span><span> </span><span>nat</span><span> </span><span class="main"><span>⇒</span></span><span> </span><span>nat</span><span>"</span></span></span><span> </span><span class="main"><span>(</span></span><span class="keyword2"><span class="keyword"><span>infixl</span></span></span><span> </span><span class="quoted"><span>"</span><span class="keyword1"><span>.#</span></span><span>"</span></span><span> 100</span><span class="main"><span>)</span></span><span> 
  </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span class="bound"><span class="entity"><span>s</span></span></span></span><span class="main"><span class="free"><span>.#</span></span></span><span class="free"><span class="bound"><span class="entity"><span>i</span></span></span></span><span> </span><span class="main"><span>≡</span></span><span> </span><span>card</span><span class="main"><span>(</span></span><span class="free"><span class="bound"><span class="entity"><span>s</span></span></span></span><span class="main"><a class="entity_ref" href="Shape.html#Shape.shape_deps|const"><span>.♮</span></a></span><span class="free"><span class="bound"><span class="entity"><span>i</span></span></span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Shape.shape_deps_in_alldeps|fact"><span class="entity_def" id="Shape.shape_deps_in_alldeps|thm"><span>shape_deps_in_alldeps</span></span></span><span class="main"><span>:</span></span><span> 
  </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>i</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><a class="entity_ref" href="Shape.html#Shape.shape_arity|const"><span>shape_arity</span></a><span> </span><span class="free"><span>s</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><a class="entity_ref" href="Shape.html#Shape.shape_deps|const"><span>shape_deps</span></a><span> </span><span class="free"><span>s</span></span><span> </span><span class="free"><span>i</span></span><span> </span><span class="main"><span>⊆</span></span><span> </span><a class="entity_ref" href="Shape.html#Shape.preshape_alldeps|const"><span>preshape_alldeps</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Shape.html#Shape.shape.Preshape|const"><span>Preshape</span></a><span> </span><span class="free"><span>s</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Shape.html#Shape.preshape_alldeps_def|fact"><span>preshape_alldeps_def</span></a><span> </span><a class="entity_ref" href="Shape.html#Shape.shape_arity_def|fact"><span>shape_arity_def</span></a><span> </span><a class="entity_ref" href="Shape.html#Shape.shape_deps_def|fact"><span>shape_deps_def</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>i</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><a class="entity_ref" href="Shape.html#Shape.shape_arity|const"><span>shape_arity</span></a><span> </span><span class="free"><span>s</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><a class="entity_ref" href="Shape.html#Shape.shape_deps|const"><span>shape_deps</span></a><span> </span><span class="free"><span>s</span></span><span> </span><span class="free"><span>i</span></span><span> </span><span class="main"><span>⊆</span></span><span> </span><a class="entity_ref" href="General.html#General.nats|const"><span>nats</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Shape.html#Shape.shape_valence|const"><span>shape_valence</span></a><span> </span><span class="free"><span>s</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Shape.html#Shape.preshape_valence|fact"><span>preshape_valence</span></a><span> </span><a class="entity_ref" href="Shape.html#Shape.shape_deps_in_alldeps|fact"><span>shape_deps_in_alldeps</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>presburger</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Shape.shape_valence_deps|fact"><span class="entity_def" id="Shape.shape_valence_deps|thm"><span>shape_valence_deps</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span>d</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>d</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><a class="entity_ref" href="Shape.html#Shape.shape_valence|const"><span>shape_valence</span></a><span> </span><span class="free"><span>s</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>∃</span></span><span> </span><span class="bound"><span class="bound"><span>i</span></span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><a class="entity_ref" href="Shape.html#Shape.shape_arity|const"><span>shape_arity</span></a><span> </span><span class="free"><span>s</span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>d</span></span><span> </span><span class="main"><span>∈</span></span><span> </span><a class="entity_ref" href="Shape.html#Shape.shape_deps|const"><span>shape_deps</span></a><span> </span><span class="free"><span>s</span></span><span> </span><span class="bound"><span>i</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span>d'</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>d</span></span><span> </span><span class="main"><span>∈</span></span><span> </span><a class="entity_ref" href="Shape.html#Shape.preshape_alldeps|const"><span>preshape_alldeps</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Shape.html#Shape.shape.Preshape|const"><span>Preshape</span></a><span> </span><span class="free"><span>s</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> 
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><span>d</span><span> </span><a class="entity_ref" href="Shape.html#Shape.preshape_valence|fact"><span>preshape_valence</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>∃</span></span><span> </span><span class="bound"><span>i</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>i</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>length</span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Shape.html#Shape.shape.Preshape|const"><span>Preshape</span></a><span> </span><span class="free"><span>s</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>∧</span></span><span> </span><span class="free"><span>d</span></span><span> </span><span class="main"><span>∈</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Shape.html#Shape.shape.Preshape|const"><span>Preshape</span></a><span> </span><span class="free"><span>s</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>!</span></span><span> </span><span class="bound"><span>i</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><span>d'</span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Shape.html#Shape.preshape_alldeps_def|fact"><span>preshape_alldeps_def</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>obtain</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>i</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span>i</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span> </span><span class="skolem"><span>i</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>length</span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Shape.html#Shape.shape.Preshape|const"><span>Preshape</span></a><span> </span><span class="free"><span>s</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>∧</span></span><span> </span><span class="free"><span>d</span></span><span> </span><span class="main"><span>∈</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Shape.html#Shape.shape.Preshape|const"><span>Preshape</span></a><span> </span><span class="free"><span>s</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>!</span></span><span> </span><span class="skolem"><span>i</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>blast</span></span><span>
  </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><span>i</span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Shape.html#Shape.shape_arity_def|fact"><span>shape_arity_def</span></a><span> </span><a class="entity_ref" href="Shape.html#Shape.shape_deps_def|fact"><span>shape_deps_def</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Shape.shape_deps_valence|fact"><span class="entity_def" id="Shape.shape_deps_valence|thm"><span>shape_deps_valence</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span>i</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>i</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><a class="entity_ref" href="Shape.html#Shape.shape_arity|const"><span>shape_arity</span></a><span> </span><span class="free"><span>s</span></span><span> </span><span class="main"><span>∧</span></span><span> </span><span class="free"><span>d</span></span><span> </span><span class="main"><span>∈</span></span><span> </span><a class="entity_ref" href="Shape.html#Shape.shape_deps|const"><span>shape_deps</span></a><span> </span><span class="free"><span>s</span></span><span> </span><span class="free"><span>i</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>d</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><a class="entity_ref" href="Shape.html#Shape.shape_valence|const"><span>shape_valence</span></a><span> </span><span class="free"><span>s</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><span>i</span><span> </span><a class="entity_ref" href="General.html#General.nats_elem|fact"><span>nats_elem</span></a><span> </span><a class="entity_ref" href="Shape.html#Shape.preshape_valence|fact"><span>preshape_valence</span></a><span> </span><a class="entity_ref" href="Shape.html#Shape.shape_deps_in_alldeps|fact"><span>shape_deps_in_alldeps</span></a><span> </span><span>subsetD</span><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Shape.nats_shape_valence_is_union|fact"><span class="entity_def" id="Shape.nats_shape_valence_is_union|thm"><span>nats_shape_valence_is_union</span></span></span><span class="main"><span>:</span></span><span> 
  </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="General.html#General.nats|const"><span>nats</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Shape.html#Shape.shape_valence|const"><span>shape_valence</span></a><span> </span><span class="free"><span>s</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>⋃</span></span><span> </span><span class="main"><span>{</span></span><span> </span><a class="entity_ref" href="Shape.html#Shape.shape_deps|const"><span>shape_deps</span></a><span> </span><span class="free"><span>s</span></span><span> </span><span class="bound"><span>i</span></span><span> </span><span class="main"><span>|</span></span><span> </span><span class="bound"><span>i</span></span><span> </span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>i</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><a class="entity_ref" href="Shape.html#Shape.shape_arity|const"><span>shape_arity</span></a><span> </span><span class="free"><span>s</span></span><span> </span><span class="main"><span>}</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Shape.html#Shape.preshape_alldeps_def|fact"><span>preshape_alldeps_def</span></a><span> </span><a class="entity_ref" href="Shape.html#Shape.preshape_valence|fact"><span>preshape_valence</span></a><span> </span><a class="entity_ref" href="Shape.html#Shape.shape_arity_def|fact"><span>shape_arity_def</span></a><span> </span><a class="entity_ref" href="Shape.html#Shape.shape_deps_def|fact"><span>shape_deps_def</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>presburger</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Shape.zero_arity_valence|fact"><span class="entity_def" id="Shape.zero_arity_valence|thm"><span>zero_arity_valence</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Shape.html#Shape.shape_arity|const"><span>shape_arity</span></a><span> </span><span class="free"><span>s</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>0</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><a class="entity_ref" href="Shape.html#Shape.shape_valence|const"><span>shape_valence</span></a><span> </span><span class="free"><span>s</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>0</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><span>less_nat_zero_code</span><span> </span><span>not_gr_zero</span><span> </span><a class="entity_ref" href="Shape.html#Shape.shape_valence_deps|fact"><span>shape_valence_deps</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Shape.zero_valence_deps|fact"><span class="entity_def" id="Shape.zero_valence_deps|thm"><span>zero_valence_deps</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>i</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><a class="entity_ref" href="Shape.html#Shape.shape_arity|const"><span>shape_arity</span></a><span> </span><span class="free"><span>s</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><a class="entity_ref" href="Shape.html#Shape.shape_valence|const"><span>shape_valence</span></a><span> </span><span class="free"><span>s</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>0</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><a class="entity_ref" href="Shape.html#Shape.shape_deps|const"><span>shape_deps</span></a><span> </span><span class="free"><span>s</span></span><span> </span><span class="free"><span>i</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>{}</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><span>all_not_in_conv</span><span> </span><span>less_nat_zero_code</span><span> </span><a class="entity_ref" href="Shape.html#Shape.shape_deps_valence|fact"><span>shape_deps_valence</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="Shape.shape_valence_at_def|fact"><span class="entity_def" id="Shape.shape_valence_at_def|thm"><span class="entity_def" id="Shape.shape_valence_at_def_raw|axiom"><span>definition</span></span></span></span></span></span><span> </span><span class="entity"><span class="entity_def" id="Shape.shape_valence_at|const"><span>shape_valence_at</span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Shape.html#Shape.shape|type"><span>shape</span></a><span> </span><span class="main"><span>⇒</span></span><span> </span><span>nat</span><span> </span><span class="main"><span>⇒</span></span><span> </span><span>nat</span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span>
  </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>shape_valence_at</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>s</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>i</span></span></span></span><span> </span><span class="main"><span>=</span></span><span> </span><span>card</span><span class="main"><span>(</span></span><a class="entity_ref" href="Shape.html#Shape.shape_deps|const"><span>shape_deps</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>s</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>i</span></span></span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>subsection</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>‹</span><span>Common Concrete Shapes</span><span>›</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>subsubsection</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>‹</span><span class="antiquoted"><span class="antiquote"><span>@{</span></span><span class="operator"><span>text</span></span><span> </span><span class="raw_text"><span>value_shape</span></span><span class="antiquote"><span>}</span></span></span><span>›</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="Shape.value_shape_def|fact"><span class="entity_def" id="Shape.value_shape_def|thm"><span class="entity_def" id="Shape.value_shape_def_raw|axiom"><span>definition</span></span></span></span></span></span><span> </span><span class="entity"><span class="entity_def" id="Shape.value_shape|const"><span>value_shape</span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><a class="entity_ref" href="Shape.html#Shape.shape|type"><span>shape</span></a></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span>
  </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>value_shape</span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="Shape.html#Shape.shape.Shape|const"><span>Shape</span></a><span> </span><span class="main"><span>[]</span></span><span>"</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Shape.value_shape_valence|fact"><span class="entity_def" id="Shape.value_shape_valence|thm"><span>value_shape_valence</span></span></span><span class="main"><span>[</span></span><span class="operator"><span>iff</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Shape.html#Shape.shape_valence|const"><span>shape_valence</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Shape.html#Shape.value_shape|const"><span>value_shape</span></a><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>0</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Shape.html#Shape.value_shape_def|fact"><span>value_shape_def</span></a><span> </span><a class="entity_ref" href="Shape.html#Shape.empty_deps_Shape_valence|fact"><span>empty_deps_Shape_valence</span></a><span> </span><a class="entity_ref" href="Shape.html#Shape.preshape_alldeps_def|fact"><span>preshape_alldeps_def</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Shape.Preshape_Shape|fact"><span class="entity_def" id="Shape.Preshape_Shape|thm"><span>Preshape_Shape</span></span></span><span class="main"><span>[</span></span><span class="operator"><span>intro</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Shape.html#Shape.wellformed_preshape|const"><span>wellformed_preshape</span></a><span> </span><span class="free"><span>s</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><a class="entity_ref" href="Shape.html#Shape.shape.Preshape|const"><span>Preshape</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Shape.html#Shape.shape.Shape|const"><span>Shape</span></a><span> </span><span class="free"><span>s</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="free"><span>s</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Shape.html#Shape.shape.Shape_inverse|fact"><span>Shape_inverse</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Shape.value_Preshape|fact"><span class="entity_def" id="Shape.value_Preshape|thm"><span>value_Preshape</span></span></span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Shape.html#Shape.shape.Preshape|const"><span>Preshape</span></a><span> </span><a class="entity_ref" href="Shape.html#Shape.value_shape|const"><span>value_shape</span></a><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>[]</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Shape.html#Shape.value_shape_def|fact"><span>value_shape_def</span></a><span class="main"><span>)</span></span><span>
  
</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Shape.value_shape_arity|fact"><span class="entity_def" id="Shape.value_shape_arity|thm"><span>value_shape_arity</span></span></span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="keyword1"><a class="entity_ref" href="Shape.html#Shape.shape_arity|const"><span>§ar</span></a></span><span> </span><a class="entity_ref" href="Shape.html#Shape.value_shape|const"><span>value_shape</span></a><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>0</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Shape.html#Shape.Shape_arity|fact"><span>Shape_arity</span></a><span> </span><a class="entity_ref" href="Shape.html#Shape.value_shape_def|fact"><span>value_shape_def</span></a><span> </span><a class="entity_ref" href="Shape.html#Shape.wellformed_preshape_empty|fact"><span>wellformed_preshape_empty</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>subsubsection</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>‹</span><span class="antiquoted"><span class="antiquote"><span>@{</span></span><span class="operator"><span>text</span></span><span> </span><span class="raw_text"><span>unop_shape</span></span><span class="antiquote"><span>}</span></span></span><span>›</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="Shape.unop_shape_def|fact"><span class="entity_def" id="Shape.unop_shape_def|thm"><span class="entity_def" id="Shape.unop_shape_def_raw|axiom"><span>definition</span></span></span></span></span></span><span> </span><span class="entity"><span class="entity_def" id="Shape.unop_shape|const"><span>unop_shape</span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><a class="entity_ref" href="Shape.html#Shape.shape|type"><span>shape</span></a></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span>
  </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>unop_shape</span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="Shape.html#Shape.shape.Shape|const"><span>Shape</span></a><span> </span><span class="main"><span>[</span></span><span class="main"><span>{}</span></span><span class="main"><span>]</span></span><span>"</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Shape.wf_unop_preshape|fact"><span class="entity_def" id="Shape.wf_unop_preshape|thm"><span>wf_unop_preshape</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Shape.html#Shape.wellformed_preshape|const"><span>wellformed_preshape</span></a><span> </span><span class="main"><span>[</span></span><span class="main"><span>{}</span></span><span class="main"><span>]</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Shape.html#Shape.preshape_alldeps_def|fact"><span>preshape_alldeps_def</span></a><span> </span><a class="entity_ref" href="Shape.html#Shape.wellformed_preshape_def|fact"><span>wellformed_preshape_def</span></a><span> 
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Shape.unop_Preshape|fact"><span class="entity_def" id="Shape.unop_Preshape|thm"><span>unop_Preshape</span></span></span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Shape.html#Shape.shape.Preshape|const"><span>Preshape</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Shape.html#Shape.unop_shape|const"><span>unop_shape</span></a><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>[</span></span><span class="main"><span>{}</span></span><span class="main"><span>]</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Shape.html#Shape.shape.Shape_inverse|fact"><span>Shape_inverse</span></a><span> </span><a class="entity_ref" href="Shape.html#Shape.unop_shape_def|fact"><span>unop_shape_def</span></a><span> </span><a class="entity_ref" href="Shape.html#Shape.wf_unop_preshape|fact"><span>wf_unop_preshape</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Shape.unop_shape_arity|fact"><span class="entity_def" id="Shape.unop_shape_arity|thm"><span>unop_shape_arity</span></span></span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="keyword1"><a class="entity_ref" href="Shape.html#Shape.shape_arity|const"><span>§ar</span></a></span><span> </span><a class="entity_ref" href="Shape.html#Shape.unop_shape|const"><span>unop_shape</span></a><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>1</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Shape.html#Shape.Shape_arity|fact"><span>Shape_arity</span></a><span> </span><a class="entity_ref" href="Shape.html#Shape.unop_shape_def|fact"><span>unop_shape_def</span></a><span> </span><a class="entity_ref" href="Shape.html#Shape.wf_unop_preshape|fact"><span>wf_unop_preshape</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Shape.unop_shape_valence|fact"><span class="entity_def" id="Shape.unop_shape_valence|thm"><span>unop_shape_valence</span></span></span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="keyword1"><a class="entity_ref" href="Shape.html#Shape.shape_valence|const"><span>§val</span></a></span><span> </span><a class="entity_ref" href="Shape.html#Shape.unop_shape|const"><span>unop_shape</span></a><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>0</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Shape.html#Shape.empty_deps_Shape_valence|fact"><span>empty_deps_Shape_valence</span></a><span> </span><a class="entity_ref" href="Shape.html#Shape.preshape_alldeps_def|fact"><span>preshape_alldeps_def</span></a><span> </span><a class="entity_ref" href="Shape.html#Shape.unop_shape_def|fact"><span>unop_shape_def</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Shape.unop_shape_deps_0|fact"><span class="entity_def" id="Shape.unop_shape_deps_0|thm"><span>unop_shape_deps_0</span></span></span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Shape.html#Shape.shape_deps|const"><span>shape_deps</span></a><span> </span><a class="entity_ref" href="Shape.html#Shape.unop_shape|const"><span>unop_shape</span></a><span> </span><span class="main"><span>0</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>{}</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Shape.html#Shape.zero_valence_deps|fact"><span>zero_valence_deps</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>subsubsection</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>‹</span><span class="antiquoted"><span class="antiquote"><span>@{</span></span><span class="operator"><span>text</span></span><span> </span><span class="raw_text"><span>binop_shape</span></span><span class="antiquote"><span>}</span></span></span><span>›</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="Shape.binop_shape_def|fact"><span class="entity_def" id="Shape.binop_shape_def|thm"><span class="entity_def" id="Shape.binop_shape_def_raw|axiom"><span>definition</span></span></span></span></span></span><span> </span><span class="entity"><span class="entity_def" id="Shape.binop_shape|const"><span>binop_shape</span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><a class="entity_ref" href="Shape.html#Shape.shape|type"><span>shape</span></a></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span>
  </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>binop_shape</span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="Shape.html#Shape.shape.Shape|const"><span>Shape</span></a><span> </span><span class="main"><span>[</span></span><span class="main"><span>{}</span></span><span class="main"><span>,</span></span><span> </span><span class="main"><span>{}</span></span><span class="main"><span>]</span></span><span>"</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Shape.wf_binop_preshape|fact"><span class="entity_def" id="Shape.wf_binop_preshape|thm"><span>wf_binop_preshape</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Shape.html#Shape.wellformed_preshape|const"><span>wellformed_preshape</span></a><span> </span><span class="main"><span>[</span></span><span class="main"><span>{}</span></span><span class="main"><span>,</span></span><span> </span><span class="main"><span>{}</span></span><span class="main"><span>]</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Shape.html#Shape.preshape_alldeps_def|fact"><span>preshape_alldeps_def</span></a><span> </span><a class="entity_ref" href="Shape.html#Shape.wellformed_preshape_def|fact"><span>wellformed_preshape_def</span></a><span> 
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><span>Sup_insert</span><span> </span><span>Union_empty</span><span> </span><span>List.set_simps</span><span> </span><a class="entity_ref" href="General.html#General.nats_0|fact"><span>nats_0</span></a><span> </span><a class="entity_ref" href="Shape.html#Shape.preshape_valence|fact"><span>preshape_valence</span></a><span> 
      </span><span>set_conv_nth</span><span> </span><a class="entity_ref" href="Shape.html#Shape.unop_Preshape|fact"><span>unop_Preshape</span></a><span> </span><a class="entity_ref" href="Shape.html#Shape.unop_shape_valence|fact"><span>unop_shape_valence</span></a><span class="main"><span>)</span></span><span>
  
</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Shape.binop_Preshape|fact"><span class="entity_def" id="Shape.binop_Preshape|thm"><span>binop_Preshape</span></span></span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Shape.html#Shape.shape.Preshape|const"><span>Preshape</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Shape.html#Shape.binop_shape|const"><span>binop_shape</span></a><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>[</span></span><span class="main"><span>{}</span></span><span class="main"><span>,</span></span><span> </span><span class="main"><span>{}</span></span><span class="main"><span>]</span></span><span>"</span></span></span><span> 
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Shape.html#Shape.shape.Shape_inverse|fact"><span>Shape_inverse</span></a><span> </span><a class="entity_ref" href="Shape.html#Shape.binop_shape_def|fact"><span>binop_shape_def</span></a><span> </span><a class="entity_ref" href="Shape.html#Shape.wf_binop_preshape|fact"><span>wf_binop_preshape</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Shape.binop_shape_arity|fact"><span class="entity_def" id="Shape.binop_shape_arity|thm"><span>binop_shape_arity</span></span></span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="keyword1"><a class="entity_ref" href="Shape.html#Shape.shape_arity|const"><span>§ar</span></a></span><span> </span><a class="entity_ref" href="Shape.html#Shape.binop_shape|const"><span>binop_shape</span></a><span> </span><span class="main"><span>=</span></span><span> </span><span>Suc</span><span> </span><span class="main"><span>(</span></span><span>Suc</span><span> </span><span class="main"><span>0</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Shape.html#Shape.shape_arity_def|fact"><span>shape_arity_def</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Shape.binop_shape_valence|fact"><span class="entity_def" id="Shape.binop_shape_valence|thm"><span>binop_shape_valence</span></span></span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="keyword1"><a class="entity_ref" href="Shape.html#Shape.shape_valence|const"><span>§val</span></a></span><span> </span><a class="entity_ref" href="Shape.html#Shape.binop_shape|const"><span>binop_shape</span></a><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>0</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><a class="entity_ref" href="Shape.html#Shape.shape.Preshape_inverse|fact"><span>Preshape_inverse</span></a><span> </span><span>Sup_insert</span><span> </span><a class="entity_ref" href="Shape.html#Shape.binop_Preshape|fact"><span>binop_Preshape</span></a><span> </span><a class="entity_ref" href="Shape.html#Shape.empty_deps_Shape_valence|fact"><span>empty_deps_Shape_valence</span></a><span> 
      </span><span>list.set</span><span class="main"><span class="main"><span>(</span></span></span><span>2</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="General.html#General.nats_0|fact"><span>nats_0</span></a><span> </span><a class="entity_ref" href="Shape.html#Shape.preshape_alldeps_def|fact"><span>preshape_alldeps_def</span></a><span> </span><a class="entity_ref" href="Shape.html#Shape.preshape_valence|fact"><span>preshape_valence</span></a><span> </span><span>set_conv_nth</span><span> </span><span>sup.idem</span><span> 
      </span><a class="entity_ref" href="Shape.html#Shape.unop_Preshape|fact"><span>unop_Preshape</span></a><span> </span><a class="entity_ref" href="Shape.html#Shape.unop_shape_valence|fact"><span>unop_shape_valence</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Shape.binop_shape_deps_0|fact"><span class="entity_def" id="Shape.binop_shape_deps_0|thm"><span>binop_shape_deps_0</span></span></span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Shape.html#Shape.binop_shape|const"><span>binop_shape</span></a><span class="main"><a class="entity_ref" href="Shape.html#Shape.shape_deps|const"><span>.♮</span></a></span><span class="main"><span>0</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>{}</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Shape.html#Shape.zero_valence_deps|fact"><span>zero_valence_deps</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Shape.binop_shape_deps_1|fact"><span class="entity_def" id="Shape.binop_shape_deps_1|thm"><span>binop_shape_deps_1</span></span></span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Shape.html#Shape.binop_shape|const"><span>binop_shape</span></a><span class="main"><a class="entity_ref" href="Shape.html#Shape.shape_deps|const"><span>.♮</span></a></span><span class="main"><span>1</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>{}</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Shape.html#Shape.zero_valence_deps|fact"><span>zero_valence_deps</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>subsubsection</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>‹</span><span class="antiquoted"><span class="antiquote"><span>@{</span></span><span class="operator"><span>text</span></span><span> </span><span class="raw_text"><span>operator_shape</span></span><span class="antiquote"><span>}</span></span></span><span>›</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="Shape.operator_shape_def|fact"><span class="entity_def" id="Shape.operator_shape_def|thm"><span class="entity_def" id="Shape.operator_shape_def_raw|axiom"><span>definition</span></span></span></span></span></span><span> </span><span class="entity"><span class="entity_def" id="Shape.operator_shape|const"><span>operator_shape</span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><a class="entity_ref" href="Shape.html#Shape.shape|type"><span>shape</span></a></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span>
  </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>operator_shape</span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="Shape.html#Shape.shape.Shape|const"><span>Shape</span></a><span> </span><span class="main"><span>[</span></span><span class="main"><span>{</span></span><span class="main"><span>0</span></span><span class="main"><span>}</span></span><span class="main"><span>]</span></span><span>"</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Shape.wf_operator_preshape|fact"><span class="entity_def" id="Shape.wf_operator_preshape|thm"><span>wf_operator_preshape</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Shape.html#Shape.wellformed_preshape|const"><span>wellformed_preshape</span></a><span> </span><span class="main"><span>[</span></span><span class="main"><span>{</span></span><span class="main"><span>0</span></span><span class="main"><span>}</span></span><span class="main"><span>]</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Shape.html#Shape.wellformed_preshape_def|fact"><span>wellformed_preshape_def</span></a><span> </span><a class="entity_ref" href="Shape.html#Shape.preshape_alldeps_def|fact"><span>preshape_alldeps_def</span></a><span> </span><a class="entity_ref" href="General.html#General.nats_def|fact"><span>nats_def</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Shape.operator_Preshape|fact"><span class="entity_def" id="Shape.operator_Preshape|thm"><span>operator_Preshape</span></span></span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Shape.html#Shape.shape.Preshape|const"><span>Preshape</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Shape.html#Shape.operator_shape|const"><span>operator_shape</span></a><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>[</span></span><span class="main"><span>{</span></span><span class="main"><span>0</span></span><span class="main"><span>}</span></span><span class="main"><span>]</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Shape.html#Shape.shape.Shape_inverse|fact"><span>Shape_inverse</span></a><span> </span><a class="entity_ref" href="Shape.html#Shape.operator_shape_def|fact"><span>operator_shape_def</span></a><span> </span><a class="entity_ref" href="Shape.html#Shape.wf_operator_preshape|fact"><span>wf_operator_preshape</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Shape.operator_shape_arity|fact"><span class="entity_def" id="Shape.operator_shape_arity|thm"><span>operator_shape_arity</span></span></span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="keyword1"><a class="entity_ref" href="Shape.html#Shape.shape_arity|const"><span>§ar</span></a></span><span> </span><a class="entity_ref" href="Shape.html#Shape.operator_shape|const"><span>operator_shape</span></a><span> </span><span class="main"><span>=</span></span><span> </span><span>Suc</span><span> </span><span class="main"><span>0</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Shape.html#Shape.shape_arity_def|fact"><span>shape_arity_def</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Shape.operator_shape_valence|fact"><span class="entity_def" id="Shape.operator_shape_valence|thm"><span>operator_shape_valence</span></span></span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="keyword1"><a class="entity_ref" href="Shape.html#Shape.shape_valence|const"><span>§val</span></a></span><span> </span><a class="entity_ref" href="Shape.html#Shape.operator_shape|const"><span>operator_shape</span></a><span> </span><span class="main"><span>=</span></span><span> </span><span>Suc</span><span> </span><span class="main"><span>0</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><span>atMost_0</span><span> </span><span>ccpo_Sup_singleton</span><span> </span><span>empty_set</span><span> </span><span>lessThan_Suc_atMost</span><span> </span><span>lessThan_def</span><span> 
      </span><span>list.set</span><span class="main"><span class="main"><span>(</span></span></span><span>2</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="General.html#General.nats_def|fact"><span>nats_def</span></a><span> </span><a class="entity_ref" href="General.html#General.nats_eq_nats|fact"><span>nats_eq_nats</span></a><span> </span><a class="entity_ref" href="Shape.html#Shape.operator_Preshape|fact"><span>operator_Preshape</span></a><span> </span><a class="entity_ref" href="Shape.html#Shape.preshape_alldeps_def|fact"><span>preshape_alldeps_def</span></a><span> </span><a class="entity_ref" href="Shape.html#Shape.preshape_valence|fact"><span>preshape_valence</span></a><span> 
      </span><span>set_conv_nth</span><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Shape.operator_shape_deps_0|fact"><span class="entity_def" id="Shape.operator_shape_deps_0|thm"><span>operator_shape_deps_0</span></span></span><span class="main"><span>[</span></span><span class="operator"><span>iff</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Shape.html#Shape.operator_shape|const"><span>operator_shape</span></a><span class="main"><a class="entity_ref" href="Shape.html#Shape.shape_deps|const"><span>.♮</span></a></span><span class="main"><span>0</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>{</span></span><span class="main"><span>0</span></span><span class="main"><span>}</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Shape.html#Shape.shape_deps_def|fact"><span>shape_deps_def</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword2"><span class="keyword"><span>end</span></span></span><span>



</span></pre>
</body>

</html>