<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

<head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"/><link rel="stylesheet" type="text/css" href="isabelle.css"/>
<title>Theory Locales</title>
</head>


<body>
<div class="head">
<h1>Theory Locales</h1>
</div>

<pre class="source"><span class="keyword1"><span class="command"><span>theory</span></span></span><span> </span><span>Locales</span><span> </span><span class="keyword2"><span class="keyword"><span>imports</span></span></span><span> </span><a href="NTerm.html"><span>NTerm</span></a><span>
</span><span class="keyword2"><span class="keyword"><span>begin</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>subsection</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>‹</span><span>Signature Locale</span><span>›</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>locale</span></span></span><span> </span><span class="entity_def" id="Locales.sigloc|locale"><span>sigloc</span></span><span> </span><span class="main"><span>=</span></span><span> 
  </span><span class="keyword2"><span class="keyword"><span>fixes</span></span></span><span> </span><span class="free"><span>Signature</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Signature.html#Signature.signature|type"><span>signature</span></a><span>"</span></span></span><span> </span><span class="main"><span>(</span></span><span class="quoted"><span>"</span><span class="keyword1"><span>𝒮</span></span><span>"</span></span><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>context</span></span></span><span> </span><a class="entity_ref" href="Locales.html#Locales.sigloc|locale"><span>sigloc</span></a><span>
</span><span class="keyword2"><span class="keyword"><span>begin</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>abbreviation</span></span></span><span>
  </span><span class="entity"><span class="entity_def" id="Locales.sigloc.Deps|const"><span>Deps</span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Signature.html#Signature.abstraction|type"><span>abstraction</span></a><span> </span><span class="main"><span>⇒</span></span><span> </span><span>nat</span><span> </span><span class="main"><span>⇒</span></span><span> </span><span>nat</span><span> </span><span>set</span><span>"</span></span></span><span> </span><span class="main"><span>(</span></span><span class="keyword2"><span class="keyword"><span>infixl</span></span></span><span> </span><span class="quoted"><span>"</span><span class="keyword1"><span>!♮</span></span><span>"</span></span><span> 100</span><span class="main"><span>)</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span class="bound"><span class="entity"><span>a</span></span></span></span><span> </span><span class="main"><span class="free"><span>!♮</span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>i</span></span></span></span><span> </span><span class="main"><span>≡</span></span><span> </span><span class="keyword1"><span class="free"><span>𝒮</span></span></span><span class="main"><a class="entity_ref" href="General.html#General.map_forced_get|const"><span>!!</span></a></span><span class="free"><span class="bound"><span class="entity"><span>a</span></span></span></span><span class="main"><a class="entity_ref" href="Shape.html#Shape.shape_deps|const"><span>.♮</span></a></span><span class="free"><span class="bound"><span class="entity"><span>i</span></span></span></span><span>"</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>abbreviation</span></span></span><span>
  </span><span class="entity"><span class="entity_def" id="Locales.sigloc.CardDeps|const"><span>CardDeps</span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Signature.html#Signature.abstraction|type"><span>abstraction</span></a><span> </span><span class="main"><span>⇒</span></span><span> </span><span>nat</span><span> </span><span class="main"><span>⇒</span></span><span> </span><span>nat</span><span>"</span></span></span><span> </span><span class="main"><span>(</span></span><span class="keyword2"><span class="keyword"><span>infixl</span></span></span><span> </span><span class="quoted"><span>"</span><span class="keyword1"><span>!#</span></span><span>"</span></span><span> 100</span><span class="main"><span>)</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span class="bound"><span class="entity"><span>a</span></span></span></span><span> </span><span class="main"><span class="free"><span>!#</span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>i</span></span></span></span><span> </span><span class="main"><span>≡</span></span><span> </span><span class="keyword1"><span class="free"><span>𝒮</span></span></span><span class="main"><a class="entity_ref" href="General.html#General.map_forced_get|const"><span>!!</span></a></span><span class="free"><span class="bound"><span class="entity"><span>a</span></span></span></span><span class="main"><a class="entity_ref" href="Shape.html#Shape.shape_deps_card|const"><span>.#</span></a></span><span class="free"><span class="bound"><span class="entity"><span>i</span></span></span></span><span>"</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>abbreviation</span></span></span><span>
  </span><span class="entity"><span class="entity_def" id="Locales.sigloc.SelDeps|const"><span>SelDeps</span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Signature.html#Signature.abstraction|type"><span>abstraction</span></a><span> </span><span class="main"><span>⇒</span></span><span> </span><span>nat</span><span> </span><span class="main"><span>⇒</span></span><span> </span><span class="tfree"><span>'b</span></span><span> </span><span>list</span><span> </span><span class="main"><span>⇒</span></span><span> </span><span class="tfree"><span>'b</span></span><span> </span><span>list</span><span>"</span></span></span><span> </span><span class="main"><span>(</span></span><span class="quoted"><span>"</span><span>_</span><span class="keyword1"><span>!@</span></span><span>_</span><span class="keyword1"><span>'(</span></span><span>_</span><span class="keyword1"><span>')</span></span><span>"</span></span><span> </span><span class="main"><span>[</span></span><span>100</span><span class="main"><span>,</span></span><span> 101</span><span class="main"><span>,</span></span><span> 0</span><span class="main"><span>]</span></span><span> 100</span><span class="main"><span>)</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span class="bound"><span class="entity"><span>a</span></span></span></span><span class="main"><span class="free"><span>!@</span></span></span><span class="free"><span class="bound"><span class="entity"><span>i</span></span></span></span><span class="main"><span class="free"><span>(</span></span></span><span class="free"><span class="bound"><span class="entity"><span>xs</span></span></span></span><span class="main"><span class="free"><span>)</span></span></span><span> </span><span class="main"><span>≡</span></span><span> </span><span class="keyword1"><span class="free"><span>𝒮</span></span></span><span class="main"><a class="entity_ref" href="General.html#General.map_forced_get|const"><span>!!</span></a></span><span class="free"><span class="bound"><span class="entity"><span>a</span></span></span></span><span class="main"><a class="entity_ref" href="Shape.html#Shape.shape_select_deps|const"><span>.@</span></a></span><span class="free"><span class="bound"><span class="entity"><span>i</span></span></span></span><span class="main"><a class="entity_ref" href="Shape.html#Shape.shape_select_deps|const"><span>(</span></a></span><span class="free"><span class="bound"><span class="entity"><span>xs</span></span></span></span><span class="main"><a class="entity_ref" href="Shape.html#Shape.shape_select_deps|const"><span>)</span></a></span><span>"</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>abbreviation</span></span></span><span> </span><span class="entity"><span class="entity_def" id="Locales.sigloc.wf|const"><span>wf</span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="NTerm.html#NTerm.nterm|type"><span>nterm</span></a><span> </span><span class="main"><span>⇒</span></span><span> </span><span>bool</span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>wf</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>t</span></span></span></span><span> </span><span class="main"><span>≡</span></span><span> </span><a class="entity_ref" href="NTerm.html#NTerm.nt_wf|const"><span>nt_wf</span></a><span> </span><span class="keyword1"><span class="free"><span>𝒮</span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>t</span></span></span></span><span>"</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>abbreviation</span></span></span><span> </span><span class="entity"><span class="entity_def" id="Locales.sigloc.frees|const"><span>frees</span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="NTerm.html#NTerm.nterm|type"><span>nterm</span></a><span> </span><span class="main"><span>⇒</span></span><span> </span><a class="entity_ref" href="NTerm.html#NTerm.variables|type"><span>variables</span></a><span>"</span></span></span><span> 
  </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>frees</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>t</span></span></span></span><span> </span><span class="main"><span>≡</span></span><span> </span><a class="entity_ref" href="NTerm.html#NTerm.nt_free|const"><span>nt_free</span></a><span> </span><span class="keyword1"><span class="free"><span>𝒮</span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>t</span></span></span></span><span>"</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>abbreviation</span></span></span><span> </span><span class="entity"><span class="entity_def" id="Locales.sigloc.is_valid_abstraction|const"><span>is_valid_abstraction</span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Signature.html#Signature.abstraction|type"><span>abstraction</span></a><span> </span><span class="main"><span>⇒</span></span><span> </span><span>bool</span><span>"</span></span></span><span> </span><span class="main"><span>(</span></span><span class="quoted"><span>"</span><span class="keyword1"><span>✓</span></span><span>"</span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span class="free"><span>✓</span></span></span><span class="free"><span class="bound"><span class="entity"><span>a</span></span></span></span><span> </span><span class="main"><span>≡</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><span class="keyword1"><span class="free"><span>𝒮</span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>a</span></span></span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>≠</span></span><span> </span><span>None</span><span class="main"><span>)</span></span><span>"</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>abbreviation</span></span></span><span> </span><span class="entity"><span class="entity_def" id="Locales.sigloc.valence_of_abstraction|const"><span>valence_of_abstraction</span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Signature.html#Signature.abstraction|type"><span>abstraction</span></a><span> </span><span class="main"><span>⇒</span></span><span> </span><span>nat</span><span>"</span></span></span><span> </span><span class="main"><span>(</span></span><span class="quoted"><span>"</span><span class="keyword1"><span>§v</span></span><span>"</span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="keyword1"><span class="free"><span>§v</span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>a</span></span></span></span><span> </span><span class="main"><span>≡</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Shape.html#Shape.shape_valence|const"><span>§val</span></a></span><span> </span><span class="main"><span>(</span></span><span class="keyword1"><span class="free"><span>𝒮</span></span></span><span class="main"><a class="entity_ref" href="General.html#General.map_forced_get|const"><span>!!</span></a></span><span class="free"><span class="bound"><span class="entity"><span>a</span></span></span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>abbreviation</span></span></span><span> </span><span class="entity"><span class="entity_def" id="Locales.sigloc.arity_of_abstraction|const"><span>arity_of_abstraction</span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Signature.html#Signature.abstraction|type"><span>abstraction</span></a><span> </span><span class="main"><span>⇒</span></span><span> </span><span>nat</span><span>"</span></span></span><span> </span><span class="main"><span>(</span></span><span class="quoted"><span>"</span><span class="keyword1"><span>§a</span></span><span>"</span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="keyword1"><span class="free"><span>§a</span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>a</span></span></span></span><span> </span><span class="main"><span>≡</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Shape.html#Shape.shape_arity|const"><span>§ar</span></a></span><span> </span><span class="main"><span>(</span></span><span class="keyword1"><span class="free"><span>𝒮</span></span></span><span class="main"><a class="entity_ref" href="General.html#General.map_forced_get|const"><span>!!</span></a></span><span class="free"><span class="bound"><span class="entity"><span>a</span></span></span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Locales.sigloc.wf_implies_valid_abs|fact"><span class="entity_def" id="Locales.sigloc.wf_implies_valid_abs|thm"><span>wf_implies_valid_abs</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span>wf</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>wf</span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="NTerm.html#NTerm.nterm.AbsApp|const"><span>AbsApp</span></a><span> </span><span class="free"><span>a</span></span><span> </span><span class="free"><span>xs</span></span><span> </span><span class="free"><span>ts</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>✓</span></span><span class="free"><span>a</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Signature.html#Signature.sig_contains|const"><span>sig_contains</span></a><span> </span><span class="keyword1"><span class="free"><span>𝒮</span></span></span><span> </span><span class="free"><span>a</span></span><span> </span><span class="main"><span>(</span></span><span>length</span><span> </span><span class="free"><span>xs</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span>length</span><span> </span><span class="free"><span>ts</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> 
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><span>local.wf</span><span> </span><a class="entity_ref" href="NTerm.html#NTerm.nt_wf.simps|fact"><span>nt_wf.simps</span></a><span class="main"><span>(</span></span><span>2</span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>blast</span></span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><span class="main"><span class="main"><span>(</span></span></span><span>no_types</span><span class="main"><span class="main"><span>,</span></span></span><span> lifting</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><span>option.case_eq_if</span><span> </span><a class="entity_ref" href="Signature.html#Signature.sig_contains_def|fact"><span>sig_contains_def</span></a><span class="main"><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Locales.sigloc.wf_VarApp|fact"><span class="entity_def" id="Locales.sigloc.wf_VarApp|thm"><span>wf_VarApp</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>wf</span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="NTerm.html#NTerm.nterm.VarApp|const"><span>VarApp</span></a><span> </span><span class="free"><span>x</span></span><span> </span><span class="free"><span>ts</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>∀</span></span><span> </span><span class="bound"><span>t</span></span><span> </span><span class="main"><span>∈</span></span><span> </span><span>set</span><span> </span><span class="free"><span>ts</span></span><span class="main"><span>.</span></span><span> </span><span>wf</span><span> </span><span class="bound"><span>t</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Locales.sigloc.wf_AbsApp_valence|fact"><span class="entity_def" id="Locales.sigloc.wf_AbsApp_valence|thm"><span>wf_AbsApp_valence</span></span></span><span class="main"><span>:</span></span><span> </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span>wf</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>wf</span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="NTerm.html#NTerm.nterm.AbsApp|const"><span>AbsApp</span></a><span> </span><span class="free"><span>a</span></span><span> </span><span class="free"><span>xs</span></span><span> </span><span class="free"><span>ts</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>length</span><span> </span><span class="free"><span>xs</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="keyword1"><span>§v</span></span><span> </span><span class="free"><span>a</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>smt</span></span><span> </span><span class="main"><span class="main"><span>(</span></span></span><span>z3</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><span>local.wf</span><span> </span><a class="entity_ref" href="General.html#General.map_forced_get_def|fact"><span>map_forced_get_def</span></a><span> </span><a class="entity_ref" href="NTerm.html#NTerm.nt_wf.simps|fact"><span>nt_wf.simps</span></a><span class="main"><span class="main"><span>(</span></span></span><span>2</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><span>option.case_eq_if</span><span> </span><a class="entity_ref" href="Signature.html#Signature.sig_contains_def|fact"><span>sig_contains_def</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Locales.sigloc.shape_deps_upper_bound|fact"><span class="entity_def" id="Locales.sigloc.shape_deps_upper_bound|thm"><span>shape_deps_upper_bound</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>✓</span></span><span class="free"><span>a</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><span class="free"><span>i</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span class="keyword1"><span>§a</span></span><span> </span><span class="free"><span>a</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><span class="free"><span>a</span></span><span class="main"><span>!♮</span></span><span class="free"><span>i</span></span><span> </span><span class="main"><span>⊆</span></span><span> </span><a class="entity_ref" href="General.html#General.nats|const"><span>nats</span></a><span> </span><span class="main"><span>(</span></span><span class="keyword1"><span>§v</span></span><span> </span><span class="free"><span>a</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Shape.html#Shape.preshape_valence|fact"><span>preshape_valence</span></a><span> </span><a class="entity_ref" href="Shape.html#Shape.shape_deps_in_alldeps|fact"><span>shape_deps_in_alldeps</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Locales.sigloc.finite_shape_deps|fact"><span class="entity_def" id="Locales.sigloc.finite_shape_deps|thm"><span>finite_shape_deps</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>✓</span></span><span class="free"><span>a</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><span class="free"><span>i</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span class="keyword1"><span>§a</span></span><span> </span><span class="free"><span>a</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><span>finite</span><span class="main"><span>(</span></span><span class="free"><span>a</span></span><span class="main"><span>!♮</span></span><span class="free"><span>i</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>meson</span></span><span> </span><a class="entity_ref" href="General.html#General.finite_nats|fact"><span>finite_nats</span></a><span> </span><span>finite_subset</span><span> </span><a class="entity_ref" href="Locales.html#Locales.sigloc.shape_deps_upper_bound|fact"><span>sigloc.shape_deps_upper_bound</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Locales.sigloc.length_boundvars_at|fact"><span class="entity_def" id="Locales.sigloc.length_boundvars_at|thm"><span>length_boundvars_at</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span>wf</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>wf</span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="NTerm.html#NTerm.nterm.AbsApp|const"><span>AbsApp</span></a><span> </span><span class="free"><span>a</span></span><span> </span><span class="free"><span>xs</span></span><span> </span><span class="free"><span>ts</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span>i</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>i</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>length</span><span> </span><span class="free"><span>ts</span></span><span>"</span></span></span><span> 
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>length</span><span> </span><span class="main"><span>(</span></span><span class="free"><span>a</span></span><span class="main"><span>!@</span></span><span class="free"><span>i</span></span><span class="main"><span>(</span></span><span class="free"><span>xs</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="free"><span>a</span></span><span> </span><span class="main"><span>!#</span></span><span> </span><span class="free"><span>i</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span> 
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span>valid</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>✓</span></span><span class="free"><span>a</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><span>wf</span><span> </span><span>wf_implies_valid_abs</span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>blast</span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span>val</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="keyword1"><span>§v</span></span><span> </span><span class="free"><span>a</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span>length</span><span> </span><span class="free"><span>xs</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><span>wf_AbsApp_valence</span><span> </span><span>wf</span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span>deps</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="free"><span>a</span></span><span class="main"><span>!♮</span></span><span class="free"><span>i</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>⊆</span></span><span> </span><a class="entity_ref" href="General.html#General.nats|const"><span>nats</span></a><span> </span><span class="main"><span>(</span></span><span class="keyword1"><span>§v</span></span><span> </span><span class="free"><span>a</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>smt</span></span><span> </span><span class="main"><span class="main"><span>(</span></span></span><span>z3</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><span>shape_deps_upper_bound</span><span> </span><span>i</span><span> </span><span>local.wf</span><span> </span><a class="entity_ref" href="General.html#General.map_forced_get_def|fact"><span>map_forced_get_def</span></a><span> </span><a class="entity_ref" href="NTerm.html#NTerm.nt_wf.simps|fact"><span>nt_wf.simps</span></a><span class="main"><span class="main"><span>(</span></span></span><span>2</span><span class="main"><span class="main"><span>)</span></span></span><span> 
        </span><span>option.case_eq_if</span><span> </span><a class="entity_ref" href="Signature.html#Signature.sig_contains_def|fact"><span>sig_contains_def</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="General.html#General.nats_length_nths|fact"><span>nats_length_nths</span></a><span> </span><span>val</span><span class="main"><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="Locales.sigloc.closed_def|fact"><span class="entity_def" id="Locales.sigloc.closed_def|thm"><span class="entity_def" id="Locales.sigloc.closed_def_raw|axiom"><span>definition</span></span></span></span></span></span><span> </span><span class="entity"><span class="entity_def" id="Locales.sigloc.closed.cong|fact"><span class="entity_def" id="Locales.sigloc.closed.cong|thm"><span class="entity_def" id="Locales.sigloc.closed|const"><span>closed</span></span></span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="NTerm.html#NTerm.nterm|type"><span>nterm</span></a><span> </span><span class="main"><span>⇒</span></span><span> </span><span>bool</span><span>"</span></span></span><span> 
  </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>closed</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>t</span></span></span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>(</span></span><span>frees</span><span> </span><span class="free"><span class="bound"><span class="entity"><span>t</span></span></span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>{}</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>

</span><span class="keyword2"><span class="keyword"><span>end</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>subsection</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>‹</span><span>Abstraction Algebra Locale</span><span>›</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>locale</span></span></span><span> </span><span class="entity_def" id="Locales.algloc|locale"><span>algloc</span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="Locales.html#Locales.sigloc|locale"><span>sigloc</span></a><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Algebra.html#Algebra.Sig|const"><span>Sig</span></a><span> </span><span class="keyword1"><span class="free"><span>𝔄</span></span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>for</span></span></span><span> </span><span class="free"><span>AA</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="tfree"><span>'a</span></span><span> </span><a class="entity_ref" href="Algebra.html#Algebra.algebra|type"><span>algebra</span></a><span>"</span></span></span><span> </span><span class="main"><span>(</span></span><span class="quoted"><span>"</span><span class="keyword1"><span>𝔄</span></span><span>"</span></span><span class="main"><span>)</span></span><span>
</span><span class="keyword2"><span class="keyword"><span>begin</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>abbreviation</span></span></span><span>
  </span><span class="entity"><span class="entity_def" id="Locales.algloc.Universe|const"><span>Universe</span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="tfree"><span>'a</span></span><span> </span><a class="entity_ref" href="Quotients.html#Quotients.quotient|type"><span>quotient</span></a><span>"</span></span></span><span> </span><span class="main"><span>(</span></span><span class="quoted"><span>"</span><span class="keyword1"><span>𝒰</span></span><span>"</span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="keyword1"><span class="free"><span>𝒰</span></span></span><span> </span><span class="main"><span>≡</span></span><span> </span><a class="entity_ref" href="Algebra.html#Algebra.Univ|const"><span>Univ</span></a><span> </span><span class="keyword1"><span class="free"><span>𝔄</span></span></span><span>"</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>abbreviation</span></span></span><span>
  </span><span class="entity"><span class="entity_def" id="Locales.algloc.Operators|const"><span>Operators</span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="tfree"><span>'a</span></span><span> </span><a class="entity_ref" href="Algebra.html#Algebra.operators|type"><span>operators</span></a><span>"</span></span></span><span> </span><span class="main"><span>(</span></span><span class="quoted"><span>"</span><span class="keyword1"><span>𝒪</span></span><span>"</span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="keyword1"><span class="free"><span>𝒪</span></span></span><span> </span><span class="main"><span>≡</span></span><span> </span><a class="entity_ref" href="Algebra.html#Algebra.Ops|const"><span>Ops</span></a><span> </span><span class="keyword1"><span class="free"><span>𝔄</span></span></span><span>"</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>abbreviation</span></span></span><span>
  </span><span class="entity"><span class="entity_def" id="Locales.algloc.Signature|const"><span>Signature</span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Signature.html#Signature.signature|type"><span>signature</span></a><span>"</span></span></span><span> </span><span class="main"><span>(</span></span><span class="quoted"><span>"</span><span class="keyword1"><span>𝒮</span></span><span>"</span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="keyword1"><span class="free"><span>𝒮</span></span></span><span> </span><span class="main"><span>≡</span></span><span> </span><a class="entity_ref" href="Algebra.html#Algebra.Sig|const"><span>Sig</span></a><span> </span><span class="keyword1"><span class="free"><span>𝔄</span></span></span><span>"</span></span></span><span> 

</span><span class="keyword1"><span class="command"><span>notation</span></span></span><span> 
  </span><span>Deps</span><span> </span><span class="main"><span>(</span></span><span class="keyword2"><span class="keyword"><span>infixl</span></span></span><span> </span><span class="quoted"><span>"</span><span class="keyword1"><span>!♮</span></span><span>"</span></span><span> 100</span><span class="main"><span>)</span></span><span> </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span>
  </span><span>CardDeps</span><span> </span><span class="main"><span>(</span></span><span class="keyword2"><span class="keyword"><span>infixl</span></span></span><span> </span><span class="quoted"><span>"</span><span class="keyword1"><span>!#</span></span><span>"</span></span><span> 100</span><span class="main"><span>)</span></span><span> </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span>
  </span><span>SelDeps</span><span> </span><span class="main"><span>(</span></span><span class="quoted"><span>"</span><span>_</span><span class="keyword1"><span>!@</span></span><span>_</span><span class="keyword1"><span>'(</span></span><span>_</span><span class="keyword1"><span>')</span></span><span>"</span></span><span> </span><span class="main"><span>[</span></span><span>100</span><span class="main"><span>,</span></span><span> 101</span><span class="main"><span>,</span></span><span> 0</span><span class="main"><span>]</span></span><span> 100</span><span class="main"><span>)</span></span><span> </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span>
  </span><span>is_valid_abstraction</span><span> </span><span class="main"><span>(</span></span><span class="quoted"><span>"</span><span class="keyword1"><span>✓</span></span><span>"</span></span><span class="main"><span>)</span></span><span> </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> 
  </span><span>valence_of_abstraction</span><span> </span><span class="main"><span>(</span></span><span class="quoted"><span>"</span><span class="keyword1"><span>§v</span></span><span>"</span></span><span class="main"><span>)</span></span><span> </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span>
  </span><span>arity_of_abstraction</span><span> </span><span class="main"><span>(</span></span><span class="quoted"><span>"</span><span class="keyword1"><span>§a</span></span><span>"</span></span><span class="main"><span>)</span></span><span> 

</span><span class="keyword2"><span class="keyword"><span>end</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>context</span></span></span><span> </span><a class="entity_ref" href="Locales.html#Locales.algloc|locale"><span>algloc</span></a><span> </span><span class="keyword2"><span class="keyword"><span>begin</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Locales.algloc.valid_in_operators|fact"><span class="entity_def" id="Locales.algloc.valid_in_operators|thm"><span>valid_in_operators</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>✓</span></span><span class="free"><span>a</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><span class="main"><span>(</span></span><span class="keyword1"><span>𝒪</span></span><span class="main"><a class="entity_ref" href="General.html#General.map_forced_get|const"><span>!!</span></a></span><span class="free"><span>a</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="Quotients.html#Quotients.qin|const"><span>/∈</span></a></span><span> </span><a class="entity_ref" href="Algebra.html#Algebra.operators|const"><span>operators</span></a><span> </span><span class="keyword1"><span>𝒰</span></span><span> </span><span class="main"><span>(</span></span><span class="keyword1"><span>𝒮</span></span><span class="main"><a class="entity_ref" href="General.html#General.map_forced_get|const"><span>!!</span></a></span><span class="free"><span>a</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><a class="entity_ref" href="Algebra.html#Algebra.algebra_compatibility|fact"><span>algebra_compatibility</span></a><span> </span><a class="entity_ref" href="General.html#General.map_forced_get_def|fact"><span>map_forced_get_def</span></a><span> </span><a class="entity_ref" href="Algebra.html#Algebra.shape_compatible_def|fact"><span>shape_compatible_def</span></a><span> </span><a class="entity_ref" href="Algebra.html#Algebra.shape_compatible_opt_def|fact"><span>shape_compatible_opt_def</span></a><span class="main"><span>)</span></span><span>
 
</span><span class="keyword2"><span class="keyword"><span>end</span></span></span><span>


</span><span class="keyword2"><span class="keyword"><span>end</span></span></span></pre>
</body>

</html>