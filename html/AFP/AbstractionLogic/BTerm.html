<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

<head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"/><link rel="stylesheet" type="text/css" href="isabelle.css"/>
<title>Theory BTerm</title>
</head>


<body>
<div class="head">
<h1>Theory BTerm</h1>
</div>

<pre class="source"><span class="keyword1"><span class="command"><span>theory</span></span></span><span> </span><span>BTerm</span><span> </span><span class="keyword2"><span class="keyword"><span>imports</span></span></span><span> </span><a href="Valuation.html"><span>Valuation</span></a><span>
</span><span class="keyword2"><span class="keyword"><span>begin</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>section</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>‹</span><span>De Bruijn Term</span><span>›</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>subsection</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>‹</span><span>De Bruijn Terms</span><span>›</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="BTerm.bterm.size_gen|fact"><span class="entity_def" id="BTerm.bterm.size|fact"><span class="entity_def" id="BTerm.arity_size_bterm|fact"><span class="entity_def" id="BTerm.bterm.size_bterm_overloaded_def|fact"><span class="entity_def" id="BTerm.size_bterm_inst.size_bterm|fact"><span class="entity_def" id="BTerm.bterm.size_bterm_def|fact"><span class="entity_def" id="BTerm.bterm.simps|fact"><span class="entity_def" id="BTerm.bterm.rec_transfer|fact"><span class="entity_def" id="BTerm.bterm.rec|fact"><span class="entity_def" id="BTerm.bterm.induct|fact"><span class="entity_def" id="BTerm.bterm.case_transfer|fact"><span class="entity_def" id="BTerm.bterm.splits|fact"><span class="entity_def" id="BTerm.bterm.split_asm|fact"><span class="entity_def" id="BTerm.bterm.split|fact"><span class="entity_def" id="BTerm.bterm.nchotomy|fact"><span class="entity_def" id="BTerm.bterm.inject|fact"><span class="entity_def" id="BTerm.bterm.exhaust|fact"><span class="entity_def" id="BTerm.bterm.distinct|fact"><span class="entity_def" id="BTerm.bterm.case_distrib|fact"><span class="entity_def" id="BTerm.bterm.case_cong_weak|fact"><span class="entity_def" id="BTerm.bterm.case_cong|fact"><span class="entity_def" id="BTerm.bterm.case|fact"><span class="entity_def" id="BTerm.bterm.eq.simps|fact"><span class="entity_def" id="BTerm.bterm.eq.refl|fact"><span class="entity_def" id="BTerm.arity_equal_bterm|fact"><span class="entity_def" id="BTerm.equal_bterm_def|fact"><span class="entity_def" id="BTerm.equal_bterm_inst.equal_bterm|fact"><span class="entity_def" id="BTerm.arity_partial_term_of_bterm|fact"><span class="entity_def" id="BTerm.partial_term_of_bterm_triv|fact"><span class="entity_def" id="BTerm.partial_term_of_bterm_inst.partial_term_of_bterm|fact"><span class="entity_def" id="BTerm.arity_term_of_bterm|fact"><span class="entity_def" id="BTerm.term_of_bterm_triv|fact"><span class="entity_def" id="BTerm.term_of_bterm_inst.term_of_bterm|fact"><span class="entity_def" id="BTerm.bterm.case_bterm_def|fact"><span class="entity_def" id="BTerm.bterm.ctor_rec_bterm_def|fact"><span class="entity_def" id="BTerm.bterm.dtor_bterm_def|fact"><span class="entity_def" id="BTerm.bterm.ctor_fold_bterm_def|fact"><span class="entity_def" id="BTerm.bterm.ctor_bterm_def|fact"><span class="entity_def" id="BTerm.arity_typerep_bterm|fact"><span class="entity_def" id="BTerm.typerep_bterm_def|fact"><span class="entity_def" id="BTerm.typerep_bterm_inst.typerep_bterm|fact"><span class="entity_def" id="BTerm.bterm.Abs_bterm_induct|fact"><span class="entity_def" id="BTerm.bterm.Rep_bterm_induct|fact"><span class="entity_def" id="BTerm.bterm.Abs_bterm_cases|fact"><span class="entity_def" id="BTerm.bterm.Rep_bterm_cases|fact"><span class="entity_def" id="BTerm.bterm.Abs_bterm_inject|fact"><span class="entity_def" id="BTerm.bterm.Rep_bterm_inject|fact"><span class="entity_def" id="BTerm.bterm.Abs_bterm_inverse|fact"><span class="entity_def" id="BTerm.bterm.Rep_bterm_inverse|fact"><span class="entity_def" id="BTerm.bterm.Rep_bterm|fact"><span class="entity_def" id="BTerm.bterm.type_definition_bterm|fact"><span class="entity_def" id="BTerm.arity_type_bterm|fact"><span class="entity_def" id="BTerm.bterm.str_init_bterm_def|fact"><span class="entity_def" id="BTerm.bterm.arity_typerep_bterm_IITN_bterm|fact"><span class="entity_def" id="BTerm.bterm.typerep_bterm_IITN_bterm_def|fact"><span class="entity_def" id="BTerm.bterm.typerep_bterm_IITN_bterm_inst.typerep_bterm_IITN_bterm|fact"><span class="entity_def" id="BTerm.bterm.bterm_IITN_bterm.Abs_bterm_IITN_bterm_induct|fact"><span class="entity_def" id="BTerm.bterm.bterm_IITN_bterm.Rep_bterm_IITN_bterm_induct|fact"><span class="entity_def" id="BTerm.bterm.bterm_IITN_bterm.Abs_bterm_IITN_bterm_cases|fact"><span class="entity_def" id="BTerm.bterm.bterm_IITN_bterm.Rep_bterm_IITN_bterm_cases|fact"><span class="entity_def" id="BTerm.bterm.bterm_IITN_bterm.Abs_bterm_IITN_bterm_inject|fact"><span class="entity_def" id="BTerm.bterm.bterm_IITN_bterm.Rep_bterm_IITN_bterm_inject|fact"><span class="entity_def" id="BTerm.bterm.bterm_IITN_bterm.Abs_bterm_IITN_bterm_inverse|fact"><span class="entity_def" id="BTerm.bterm.bterm_IITN_bterm.Rep_bterm_IITN_bterm_inverse|fact"><span class="entity_def" id="BTerm.bterm.bterm_IITN_bterm.Rep_bterm_IITN_bterm|fact"><span class="entity_def" id="BTerm.bterm.bterm_IITN_bterm.type_definition_bterm_IITN_bterm|fact"><span class="entity_def" id="BTerm.arity_type_bterm_IITN_bterm|fact"><span class="entity_def" id="BTerm.bterm.min_alg_bterm_def|fact"><span class="entity_def" id="BTerm.bterm.mor_bterm_def|fact"><span class="entity_def" id="BTerm.bterm.alg_bterm_def|fact"><span class="entity_def" id="BTerm.pre_bterm.bterm.set_pre_bterm_def|fact"><span class="entity_def" id="BTerm.pre_bterm.bterm.rel_pre_bterm_def|fact"><span class="entity_def" id="BTerm.pre_bterm.bterm.map_pre_bterm_def|fact"><span class="entity_def" id="BTerm.bterm.arity_typerep_bterm_pre_bterm|fact"><span class="entity_def" id="BTerm.bterm.typerep_bterm_pre_bterm_def|fact"><span class="entity_def" id="BTerm.bterm.typerep_bterm_pre_bterm_inst.typerep_bterm_pre_bterm|fact"><span class="entity_def" id="BTerm.bterm.bterm_pre_bterm.Abs_bterm_pre_bterm_induct|fact"><span class="entity_def" id="BTerm.bterm.bterm_pre_bterm.Rep_bterm_pre_bterm_induct|fact"><span class="entity_def" id="BTerm.bterm.bterm_pre_bterm.Abs_bterm_pre_bterm_cases|fact"><span class="entity_def" id="BTerm.bterm.bterm_pre_bterm.Rep_bterm_pre_bterm_cases|fact"><span class="entity_def" id="BTerm.bterm.bterm_pre_bterm.Abs_bterm_pre_bterm_inject|fact"><span class="entity_def" id="BTerm.bterm.bterm_pre_bterm.Rep_bterm_pre_bterm_inject|fact"><span class="entity_def" id="BTerm.bterm.bterm_pre_bterm.Abs_bterm_pre_bterm_inverse|fact"><span class="entity_def" id="BTerm.bterm.bterm_pre_bterm.Rep_bterm_pre_bterm_inverse|fact"><span class="entity_def" id="BTerm.bterm.bterm_pre_bterm.Rep_bterm_pre_bterm|fact"><span class="entity_def" id="BTerm.bterm.bterm_pre_bterm.type_definition_bterm_pre_bterm|fact"><span class="entity_def" id="BTerm.arity_type_bterm_pre_bterm|fact"><span class="entity_def" id="BTerm.bterm.size_gen(3)|thm"><span class="entity_def" id="BTerm.bterm.size_gen(2)|thm"><span class="entity_def" id="BTerm.bterm.size_gen(1)|thm"><span class="entity_def" id="BTerm.bterm.size(6)|thm"><span class="entity_def" id="BTerm.bterm.size(5)|thm"><span class="entity_def" id="BTerm.bterm.size(4)|thm"><span class="entity_def" id="BTerm.bterm.size(3)|thm"><span class="entity_def" id="BTerm.bterm.size(2)|thm"><span class="entity_def" id="BTerm.bterm.size(1)|thm"><span class="entity_def" id="BTerm.arity_size_bterm|thm"><span class="entity_def" id="BTerm.bterm.size_bterm_overloaded_def|thm"><span class="entity_def" id="BTerm.size_bterm_inst.size_bterm|thm"><span class="entity_def" id="BTerm.bterm.size_bterm_def|thm"><span class="entity_def" id="BTerm.bterm.simps(15)|thm"><span class="entity_def" id="BTerm.bterm.simps(14)|thm"><span class="entity_def" id="BTerm.bterm.simps(13)|thm"><span class="entity_def" id="BTerm.bterm.simps(12)|thm"><span class="entity_def" id="BTerm.bterm.simps(11)|thm"><span class="entity_def" id="BTerm.bterm.simps(10)|thm"><span class="entity_def" id="BTerm.bterm.simps(9)|thm"><span class="entity_def" id="BTerm.bterm.simps(8)|thm"><span class="entity_def" id="BTerm.bterm.simps(7)|thm"><span class="entity_def" id="BTerm.bterm.simps(6)|thm"><span class="entity_def" id="BTerm.bterm.simps(5)|thm"><span class="entity_def" id="BTerm.bterm.simps(4)|thm"><span class="entity_def" id="BTerm.bterm.simps(3)|thm"><span class="entity_def" id="BTerm.bterm.simps(2)|thm"><span class="entity_def" id="BTerm.bterm.simps(1)|thm"><span class="entity_def" id="BTerm.bterm.rec_transfer|thm"><span class="entity_def" id="BTerm.bterm.rec(3)|thm"><span class="entity_def" id="BTerm.bterm.rec(2)|thm"><span class="entity_def" id="BTerm.bterm.rec(1)|thm"><span class="entity_def" id="BTerm.bterm.induct|thm"><span class="entity_def" id="BTerm.bterm.case_transfer|thm"><span class="entity_def" id="BTerm.bterm.splits(2)|thm"><span class="entity_def" id="BTerm.bterm.splits(1)|thm"><span class="entity_def" id="BTerm.bterm.split_asm|thm"><span class="entity_def" id="BTerm.bterm.split|thm"><span class="entity_def" id="BTerm.bterm.nchotomy|thm"><span class="entity_def" id="BTerm.bterm.inject(3)|thm"><span class="entity_def" id="BTerm.bterm.inject(2)|thm"><span class="entity_def" id="BTerm.bterm.inject(1)|thm"><span class="entity_def" id="BTerm.bterm.exhaust|thm"><span class="entity_def" id="BTerm.bterm.distinct(6)|thm"><span class="entity_def" id="BTerm.bterm.distinct(5)|thm"><span class="entity_def" id="BTerm.bterm.distinct(4)|thm"><span class="entity_def" id="BTerm.bterm.distinct(3)|thm"><span class="entity_def" id="BTerm.bterm.distinct(2)|thm"><span class="entity_def" id="BTerm.bterm.distinct(1)|thm"><span class="entity_def" id="BTerm.bterm.case_distrib|thm"><span class="entity_def" id="BTerm.bterm.case_cong_weak|thm"><span class="entity_def" id="BTerm.bterm.case_cong|thm"><span class="entity_def" id="BTerm.bterm.case(3)|thm"><span class="entity_def" id="BTerm.bterm.case(2)|thm"><span class="entity_def" id="BTerm.bterm.case(1)|thm"><span class="entity_def" id="BTerm.bterm.eq.simps(15)|thm"><span class="entity_def" id="BTerm.bterm.eq.simps(14)|thm"><span class="entity_def" id="BTerm.bterm.eq.simps(13)|thm"><span class="entity_def" id="BTerm.bterm.eq.simps(12)|thm"><span class="entity_def" id="BTerm.bterm.eq.simps(11)|thm"><span class="entity_def" id="BTerm.bterm.eq.simps(10)|thm"><span class="entity_def" id="BTerm.bterm.eq.simps(9)|thm"><span class="entity_def" id="BTerm.bterm.eq.simps(8)|thm"><span class="entity_def" id="BTerm.bterm.eq.simps(7)|thm"><span class="entity_def" id="BTerm.bterm.eq.simps(6)|thm"><span class="entity_def" id="BTerm.bterm.eq.simps(5)|thm"><span class="entity_def" id="BTerm.bterm.eq.simps(4)|thm"><span class="entity_def" id="BTerm.bterm.eq.simps(3)|thm"><span class="entity_def" id="BTerm.bterm.eq.simps(2)|thm"><span class="entity_def" id="BTerm.bterm.eq.simps(1)|thm"><span class="entity_def" id="BTerm.bterm.eq.refl|thm"><span class="entity_def" id="BTerm.arity_equal_bterm|thm"><span class="entity_def" id="BTerm.equal_bterm_def|thm"><span class="entity_def" id="BTerm.equal_bterm_inst.equal_bterm|thm"><span class="entity_def" id="BTerm.arity_partial_term_of_bterm|thm"><span class="entity_def" id="BTerm.partial_term_of_bterm_triv|thm"><span class="entity_def" id="BTerm.partial_term_of_bterm_inst.partial_term_of_bterm|thm"><span class="entity_def" id="BTerm.arity_term_of_bterm|thm"><span class="entity_def" id="BTerm.term_of_bterm_triv|thm"><span class="entity_def" id="BTerm.term_of_bterm_inst.term_of_bterm|thm"><span class="entity_def" id="BTerm.bterm.case_bterm_def|thm"><span class="entity_def" id="BTerm.bterm.ctor_rec_bterm_def|thm"><span class="entity_def" id="BTerm.bterm.dtor_bterm_def|thm"><span class="entity_def" id="BTerm.bterm.ctor_fold_bterm_def|thm"><span class="entity_def" id="BTerm.bterm.ctor_bterm_def|thm"><span class="entity_def" id="BTerm.arity_typerep_bterm|thm"><span class="entity_def" id="BTerm.typerep_bterm_def|thm"><span class="entity_def" id="BTerm.typerep_bterm_inst.typerep_bterm|thm"><span class="entity_def" id="BTerm.bterm.Abs_bterm_induct|thm"><span class="entity_def" id="BTerm.bterm.Rep_bterm_induct|thm"><span class="entity_def" id="BTerm.bterm.Abs_bterm_cases|thm"><span class="entity_def" id="BTerm.bterm.Rep_bterm_cases|thm"><span class="entity_def" id="BTerm.bterm.Abs_bterm_inject|thm"><span class="entity_def" id="BTerm.bterm.Rep_bterm_inject|thm"><span class="entity_def" id="BTerm.bterm.Abs_bterm_inverse|thm"><span class="entity_def" id="BTerm.bterm.Rep_bterm_inverse|thm"><span class="entity_def" id="BTerm.bterm.Rep_bterm|thm"><span class="entity_def" id="BTerm.bterm.type_definition_bterm|thm"><span class="entity_def" id="BTerm.arity_type_bterm|thm"><span class="entity_def" id="BTerm.bterm.str_init_bterm_def|thm"><span class="entity_def" id="BTerm.bterm.arity_typerep_bterm_IITN_bterm|thm"><span class="entity_def" id="BTerm.bterm.typerep_bterm_IITN_bterm_def|thm"><span class="entity_def" id="BTerm.bterm.typerep_bterm_IITN_bterm_inst.typerep_bterm_IITN_bterm|thm"><span class="entity_def" id="BTerm.bterm.bterm_IITN_bterm.Abs_bterm_IITN_bterm_induct|thm"><span class="entity_def" id="BTerm.bterm.bterm_IITN_bterm.Rep_bterm_IITN_bterm_induct|thm"><span class="entity_def" id="BTerm.bterm.bterm_IITN_bterm.Abs_bterm_IITN_bterm_cases|thm"><span class="entity_def" id="BTerm.bterm.bterm_IITN_bterm.Rep_bterm_IITN_bterm_cases|thm"><span class="entity_def" id="BTerm.bterm.bterm_IITN_bterm.Abs_bterm_IITN_bterm_inject|thm"><span class="entity_def" id="BTerm.bterm.bterm_IITN_bterm.Rep_bterm_IITN_bterm_inject|thm"><span class="entity_def" id="BTerm.bterm.bterm_IITN_bterm.Abs_bterm_IITN_bterm_inverse|thm"><span class="entity_def" id="BTerm.bterm.bterm_IITN_bterm.Rep_bterm_IITN_bterm_inverse|thm"><span class="entity_def" id="BTerm.bterm.bterm_IITN_bterm.Rep_bterm_IITN_bterm|thm"><span class="entity_def" id="BTerm.bterm.bterm_IITN_bterm.type_definition_bterm_IITN_bterm|thm"><span class="entity_def" id="BTerm.arity_type_bterm_IITN_bterm|thm"><span class="entity_def" id="BTerm.bterm.min_alg_bterm_def|thm"><span class="entity_def" id="BTerm.bterm.mor_bterm_def|thm"><span class="entity_def" id="BTerm.bterm.alg_bterm_def|thm"><span class="entity_def" id="BTerm.pre_bterm.bterm.set_pre_bterm_def|thm"><span class="entity_def" id="BTerm.pre_bterm.bterm.rel_pre_bterm_def|thm"><span class="entity_def" id="BTerm.pre_bterm.bterm.map_pre_bterm_def|thm"><span class="entity_def" id="BTerm.bterm.arity_typerep_bterm_pre_bterm|thm"><span class="entity_def" id="BTerm.bterm.typerep_bterm_pre_bterm_def|thm"><span class="entity_def" id="BTerm.bterm.typerep_bterm_pre_bterm_inst.typerep_bterm_pre_bterm|thm"><span class="entity_def" id="BTerm.bterm.bterm_pre_bterm.Abs_bterm_pre_bterm_induct|thm"><span class="entity_def" id="BTerm.bterm.bterm_pre_bterm.Rep_bterm_pre_bterm_induct|thm"><span class="entity_def" id="BTerm.bterm.bterm_pre_bterm.Abs_bterm_pre_bterm_cases|thm"><span class="entity_def" id="BTerm.bterm.bterm_pre_bterm.Rep_bterm_pre_bterm_cases|thm"><span class="entity_def" id="BTerm.bterm.bterm_pre_bterm.Abs_bterm_pre_bterm_inject|thm"><span class="entity_def" id="BTerm.bterm.bterm_pre_bterm.Rep_bterm_pre_bterm_inject|thm"><span class="entity_def" id="BTerm.bterm.bterm_pre_bterm.Abs_bterm_pre_bterm_inverse|thm"><span class="entity_def" id="BTerm.bterm.bterm_pre_bterm.Rep_bterm_pre_bterm_inverse|thm"><span class="entity_def" id="BTerm.bterm.bterm_pre_bterm.Rep_bterm_pre_bterm|thm"><span class="entity_def" id="BTerm.bterm.bterm_pre_bterm.type_definition_bterm_pre_bterm|thm"><span class="entity_def" id="BTerm.arity_type_bterm_pre_bterm|thm"><span class="entity_def" id="BTerm.bterm.size_bterm_overloaded_def|axiom"><span class="entity_def" id="BTerm.size_bterm_inst.size_bterm_def|axiom"><span class="entity_def" id="BTerm.bterm.size_bterm_def|axiom"><span class="entity_def" id="BTerm.bterm.rec_bterm_def|axiom"><span class="entity_def" id="BTerm.equal_bterm_def_raw|axiom"><span class="entity_def" id="BTerm.equal_bterm_inst.equal_bterm_def|axiom"><span class="entity_def" id="BTerm.partial_term_of_bterm_triv_raw|axiom"><span class="entity_def" id="BTerm.partial_term_of_bterm_inst.partial_term_of_bterm_def|axiom"><span class="entity_def" id="BTerm.term_of_bterm_triv_raw|axiom"><span class="entity_def" id="BTerm.term_of_bterm_inst.term_of_bterm_def|axiom"><span class="entity_def" id="BTerm.bterm.case_bterm_def|axiom"><span class="entity_def" id="BTerm.bterm.Abstr_def|axiom"><span class="entity_def" id="BTerm.bterm.BoundVar_def|axiom"><span class="entity_def" id="BTerm.bterm.FreeVar_def|axiom"><span class="entity_def" id="BTerm.bterm.ctor_rec_bterm_def|axiom"><span class="entity_def" id="BTerm.bterm.dtor_bterm_def|axiom"><span class="entity_def" id="BTerm.bterm.ctor_fold_bterm_def|axiom"><span class="entity_def" id="BTerm.bterm.ctor_bterm_def|axiom"><span class="entity_def" id="BTerm.typerep_bterm_def_raw|axiom"><span class="entity_def" id="BTerm.typerep_bterm_inst.typerep_bterm_def|axiom"><span class="entity_def" id="BTerm.bterm.type_definition_bterm|axiom"><span class="entity_def" id="BTerm.arity_type_bterm|axiom"><span class="entity_def" id="BTerm.bterm.str_init_bterm_def|axiom"><span class="entity_def" id="BTerm.bterm.typerep_bterm_IITN_bterm_def_raw|axiom"><span class="entity_def" id="BTerm.bterm.typerep_bterm_IITN_bterm_inst.typerep_bterm_IITN_bterm_def|axiom"><span class="entity_def" id="BTerm.bterm.bterm_IITN_bterm.type_definition_bterm_IITN_bterm|axiom"><span class="entity_def" id="BTerm.arity_type_bterm_IITN_bterm|axiom"><span class="entity_def" id="BTerm.bterm.min_alg_bterm_def|axiom"><span class="entity_def" id="BTerm.bterm.mor_bterm_def|axiom"><span class="entity_def" id="BTerm.bterm.alg_bterm_def|axiom"><span class="entity_def" id="BTerm.pre_bterm.bterm.wit_pre_bterm_def|axiom"><span class="entity_def" id="BTerm.pre_bterm.bterm.pred_pre_bterm_def|axiom"><span class="entity_def" id="BTerm.pre_bterm.bterm.rel_pre_bterm_def|axiom"><span class="entity_def" id="BTerm.pre_bterm.bterm.set_pre_bterm_def|axiom"><span class="entity_def" id="BTerm.pre_bterm.bterm.map_pre_bterm_def|axiom"><span class="entity_def" id="BTerm.bterm.typerep_bterm_pre_bterm_def_raw|axiom"><span class="entity_def" id="BTerm.bterm.typerep_bterm_pre_bterm_inst.typerep_bterm_pre_bterm_def|axiom"><span class="entity_def" id="BTerm.bterm.bterm_pre_bterm.type_definition_bterm_pre_bterm|axiom"><span class="entity_def" id="BTerm.arity_type_bterm_pre_bterm|axiom"><span class="entity_def" id="BTerm.raw_sum.bterm.sum.Sum_Type.set_raw_sum_def|axiom"><span class="entity_def" id="BTerm.size_bterm_inst.size_bterm|const"><span class="entity_def" id="BTerm.bterm.size_bterm|const"><span class="entity_def" id="BTerm.equal_bterm_inst.equal_bterm|const"><span class="entity_def" id="BTerm.partial_term_of_bterm_inst.partial_term_of_bterm|const"><span class="entity_def" id="BTerm.term_of_bterm_inst.term_of_bterm|const"><span class="entity_def" id="BTerm.bterm.case_bterm|const"><span class="entity_def" id="BTerm.typerep_bterm_inst.typerep_bterm|const"><span class="entity_def" id="BTerm.bterm.Abs_bterm|const"><span class="entity_def" id="BTerm.bterm.Rep_bterm|const"><span class="entity_def" id="BTerm.bterm.typerep_bterm_IITN_bterm_inst.typerep_bterm_IITN_bterm|const"><span class="entity_def" id="BTerm.bterm.bterm_IITN_bterm.Abs_bterm_IITN_bterm|const"><span class="entity_def" id="BTerm.bterm.bterm_IITN_bterm.Rep_bterm_IITN_bterm|const"><span class="entity_def" id="BTerm.bterm.mor_bterm|const"><span class="entity_def" id="BTerm.bterm.alg_bterm|const"><span class="entity_def" id="BTerm.bterm.typerep_bterm_pre_bterm_inst.typerep_bterm_pre_bterm|const"><span class="entity_def" id="BTerm.bterm.bterm_pre_bterm.Abs_bterm_pre_bterm|const"><span class="entity_def" id="BTerm.bterm.bterm_pre_bterm.Rep_bterm_pre_bterm|const"><span class="entity_def" id="BTerm.raw_sum.bterm.sum.Sum_Type.set_raw_sum|const"><span class="entity_def" id="BTerm.bterm.bterm_IITN_bterm|type"><span>datatype</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span> </span><span class="entity_def" id="BTerm.bterm.rec_bterm|const"><span class="entity_def" id="BTerm.bterm.ctor_rec_bterm|const"><span class="entity_def" id="BTerm.bterm.dtor_bterm|const"><span class="entity_def" id="BTerm.bterm.ctor_fold_bterm|const"><span class="entity_def" id="BTerm.bterm.ctor_bterm|const"><span class="entity_def" id="BTerm.bterm.str_init_bterm|const"><span class="entity_def" id="BTerm.bterm.min_alg_bterm|const"><span class="entity_def" id="BTerm.pre_bterm.bterm.wit_pre_bterm|const"><span class="entity_def" id="BTerm.pre_bterm.bterm.pred_pre_bterm|const"><span class="entity_def" id="BTerm.pre_bterm.bterm.rel_pre_bterm|const"><span class="entity_def" id="BTerm.pre_bterm.bterm.set_pre_bterm|const"><span class="entity_def" id="BTerm.pre_bterm.bterm.map_pre_bterm|const"><span class="entity_def" id="BTerm.bterm|type"><span class="entity_def" id="BTerm.bterm.bterm_pre_bterm|type"><span>bterm</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span> </span><span class="main"><span>=</span></span><span> 
  </span><span class="entity_def" id="BTerm.bterm.FreeVar|const"><span>FreeVar</span></span><span> </span><span class="quoted"><a class="entity_ref" href="NTerm.html#NTerm.variable|type"><span>variable</span></a></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="BTerm.html#BTerm.bterm|type"><span>bterm</span></a><span> </span><span>list</span><span>›</span></span></span><span>
</span><span class="main"><span>|</span></span><span> </span><span class="entity_def" id="BTerm.bterm.BoundVar|const"><span>BoundVar</span></span><span> </span><span class="quoted"><span>nat</span></span><span>
</span><span class="main"><span>|</span></span><span> </span><span class="entity_def" id="BTerm.bterm.Abstr|const"><span>Abstr</span></span><span> </span><span class="quoted"><a class="entity_ref" href="Signature.html#Signature.abstraction|type"><span>abstraction</span></a></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="BTerm.html#BTerm.bterm|type"><span>bterm</span></a><span> </span><span>list</span><span>›</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>subsection</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>‹</span><span>Unbound and Free Variables</span><span>›</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>context</span></span></span><span> </span><a class="entity_ref" href="Locales.html#Locales.sigloc|locale"><span>sigloc</span></a><span> </span><span class="keyword2"><span class="keyword"><span>begin</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="BTerm.sigloc.raise_indices_def|fact"><span class="entity_def" id="BTerm.sigloc.raise_indices_def|thm"><span class="entity_def" id="BTerm.sigloc.raise_indices_def_raw|axiom"><span>definition</span></span></span></span></span></span><span> </span><span class="entity"><span class="entity_def" id="BTerm.sigloc.raise_indices|const"><span>raise_indices</span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>nat</span><span> </span><span>set</span><span> </span><span class="main"><span>⇒</span></span><span> </span><span>nat</span><span> </span><span class="main"><span>⇒</span></span><span> </span><span>nat</span><span> </span><span>set</span><span>"</span></span></span><span> </span><span class="main"><span>(</span></span><span class="keyword2"><span class="keyword"><span>infixl</span></span></span><span> </span><span class="quoted"><span>"</span><span class="keyword1"><span>.↑</span></span><span>"</span></span><span> 80</span><span class="main"><span>)</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>raise_indices</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>I</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>m</span></span></span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>{</span></span><span> </span><span class="bound"><span>i</span></span><span> </span><span class="main"><span>+</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>m</span></span></span></span><span> </span><span class="main"><span>|</span></span><span> </span><span class="bound"><span>i</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>i</span></span><span> </span><span class="main"><span>∈</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>I</span></span></span></span><span> </span><span class="main"><span>}</span></span><span>"</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="BTerm.sigloc.lower_indices_def|fact"><span class="entity_def" id="BTerm.sigloc.lower_indices_def|thm"><span class="entity_def" id="BTerm.sigloc.lower_indices_def_raw|axiom"><span>definition</span></span></span></span></span></span><span> </span><span class="entity"><span class="entity_def" id="BTerm.sigloc.lower_indices|const"><span>lower_indices</span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>nat</span><span> </span><span>set</span><span> </span><span class="main"><span>⇒</span></span><span> </span><span>nat</span><span> </span><span class="main"><span>⇒</span></span><span> </span><span>nat</span><span> </span><span>set</span><span>"</span></span></span><span> </span><span class="main"><span>(</span></span><span class="keyword2"><span class="keyword"><span>infixl</span></span></span><span> </span><span class="quoted"><span>"</span><span class="keyword1"><span>.↓</span></span><span>"</span></span><span> 80</span><span class="main"><span>)</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span class="bound"><span class="entity"><span>I</span></span></span></span><span> </span><span class="main"><span class="free"><span>.↓</span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>m</span></span></span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>{</span></span><span> </span><span class="bound"><span>i</span></span><span> </span><span class="main"><span>-</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>m</span></span></span></span><span> </span><span class="main"><span>|</span></span><span> </span><span class="bound"><span>i</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>i</span></span><span> </span><span class="main"><span>∈</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>I</span></span></span></span><span> </span><span class="main"><span>∧</span></span><span> </span><span class="bound"><span>i</span></span><span> </span><span class="main"><span>≥</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>m</span></span></span></span><span> </span><span class="main"><span>}</span></span><span>"</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="BTerm.sigloc.raise_indices_0|fact"><span class="entity_def" id="BTerm.sigloc.raise_indices_0|thm"><span>raise_indices_0</span></span></span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>I</span></span><span> </span><span class="main"><a class="entity_ref" href="BTerm.html#BTerm.sigloc.raise_indices|const"><span>.↑</span></a></span><span> </span><span class="main"><span>0</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="free"><span>I</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><span>raise_indices_def</span><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="BTerm.sigloc.lower_indices_0|fact"><span class="entity_def" id="BTerm.sigloc.lower_indices_0|thm"><span>lower_indices_0</span></span></span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>I</span></span><span> </span><span class="main"><a class="entity_ref" href="BTerm.html#BTerm.sigloc.lower_indices|const"><span>.↓</span></a></span><span> </span><span class="main"><span>0</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="free"><span>I</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><span>lower_indices_def</span><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="BTerm.sigloc.raise_indices_mono|fact"><span class="entity_def" id="BTerm.sigloc.raise_indices_mono|thm"><span>raise_indices_mono</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>A</span></span><span> </span><span class="main"><span>⊆</span></span><span> </span><span class="free"><span>B</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><span class="free"><span>A</span></span><span> </span><span class="main"><a class="entity_ref" href="BTerm.html#BTerm.sigloc.raise_indices|const"><span>.↑</span></a></span><span> </span><span class="free"><span>m</span></span><span> </span><span class="main"><span>⊆</span></span><span> </span><span class="free"><span>B</span></span><span> </span><span class="main"><a class="entity_ref" href="BTerm.html#BTerm.sigloc.raise_indices|const"><span>.↑</span></a></span><span> </span><span class="free"><span>m</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><span>raise_indices_def</span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="BTerm.sigloc.lower_indices_mono|fact"><span class="entity_def" id="BTerm.sigloc.lower_indices_mono|thm"><span>lower_indices_mono</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>A</span></span><span> </span><span class="main"><span>⊆</span></span><span> </span><span class="free"><span>B</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><span class="free"><span>A</span></span><span> </span><span class="main"><a class="entity_ref" href="BTerm.html#BTerm.sigloc.lower_indices|const"><span>.↓</span></a></span><span> </span><span class="free"><span>m</span></span><span> </span><span class="main"><span>⊆</span></span><span> </span><span class="free"><span>B</span></span><span> </span><span class="main"><a class="entity_ref" href="BTerm.html#BTerm.sigloc.lower_indices|const"><span>.↓</span></a></span><span> </span><span class="free"><span>m</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><span>lower_indices_def</span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="BTerm.sigloc.raise_lower_indices_le|fact"><span class="entity_def" id="BTerm.sigloc.raise_lower_indices_le|thm"><span>raise_lower_indices_le</span></span></span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>n</span></span><span> </span><span class="main"><span>≤</span></span><span> </span><span class="free"><span>m</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><span class="free"><span>I</span></span><span> </span><span class="main"><a class="entity_ref" href="BTerm.html#BTerm.sigloc.raise_indices|const"><span>.↑</span></a></span><span> </span><span class="free"><span>m</span></span><span> </span><span class="main"><a class="entity_ref" href="BTerm.html#BTerm.sigloc.lower_indices|const"><span>.↓</span></a></span><span> </span><span class="free"><span>n</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="free"><span>I</span></span><span> </span><span class="main"><a class="entity_ref" href="BTerm.html#BTerm.sigloc.raise_indices|const"><span>.↑</span></a></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>m</span></span><span> </span><span class="main"><span>-</span></span><span> </span><span class="free"><span>n</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><span>lower_indices_def</span><span> </span><span>raise_indices_def</span><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="BTerm.sigloc.raise_lower_indices_ge|fact"><span class="entity_def" id="BTerm.sigloc.raise_lower_indices_ge|thm"><span>raise_lower_indices_ge</span></span></span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>n</span></span><span> </span><span class="main"><span>≥</span></span><span> </span><span class="free"><span>m</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><span class="free"><span>I</span></span><span> </span><span class="main"><a class="entity_ref" href="BTerm.html#BTerm.sigloc.raise_indices|const"><span>.↑</span></a></span><span> </span><span class="free"><span>m</span></span><span> </span><span class="main"><a class="entity_ref" href="BTerm.html#BTerm.sigloc.lower_indices|const"><span>.↓</span></a></span><span> </span><span class="free"><span>n</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="free"><span>I</span></span><span> </span><span class="main"><a class="entity_ref" href="BTerm.html#BTerm.sigloc.lower_indices|const"><span>.↓</span></a></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>n</span></span><span> </span><span class="main"><span>-</span></span><span> </span><span class="free"><span>m</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><span>lower_indices_def</span><span> </span><span>raise_indices_def</span><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="BTerm.sigloc.erase_bottom_indices|fact"><span class="entity_def" id="BTerm.sigloc.erase_bottom_indices|thm"><span>erase_bottom_indices</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>i</span></span><span> </span><span class="main"><span>∈</span></span><span> </span><span class="free"><span>I</span></span><span> </span><span class="main"><a class="entity_ref" href="BTerm.html#BTerm.sigloc.lower_indices|const"><span>.↓</span></a></span><span> </span><span class="free"><span>m</span></span><span> </span><span class="main"><a class="entity_ref" href="BTerm.html#BTerm.sigloc.raise_indices|const"><span>.↑</span></a></span><span> </span><span class="free"><span>m</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><span class="free"><span>i</span></span><span> </span><span class="main"><span>≥</span></span><span> </span><span class="free"><span>m</span></span><span> </span><span class="main"><span>∧</span></span><span> </span><span class="free"><span>i</span></span><span> </span><span class="main"><span>∈</span></span><span> </span><span class="free"><span>I</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><span>lower_indices_def</span><span> </span><span>raise_indices_def</span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>force</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="BTerm.sigloc.undo_raise_indices|fact"><span class="entity_def" id="BTerm.sigloc.undo_raise_indices|thm"><span>undo_raise_indices</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>i</span></span><span> </span><span class="main"><span>∈</span></span><span> </span><span class="free"><span>I</span></span><span> </span><span class="main"><a class="entity_ref" href="BTerm.html#BTerm.sigloc.raise_indices|const"><span>.↑</span></a></span><span> </span><span class="free"><span>m</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><span class="free"><span>i</span></span><span> </span><span class="main"><span>-</span></span><span> </span><span class="free"><span>m</span></span><span> </span><span class="main"><span>∈</span></span><span> </span><span class="free"><span>I</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><span>raise_indices_def</span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>fastforce</span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="BTerm.sigloc.unbounds.elims|fact"><span class="entity_def" id="BTerm.sigloc.unbounds.induct|fact"><span class="entity_def" id="BTerm.sigloc.unbounds.simps|fact"><span class="entity_def" id="BTerm.sigloc.unbounds.pelims|fact"><span class="entity_def" id="BTerm.sigloc.unbounds.cases|fact"><span class="entity_def" id="BTerm.sigloc.unbounds.termination|fact"><span class="entity_def" id="BTerm.sigloc.unbounds.pinduct|fact"><span class="entity_def" id="BTerm.sigloc.unbounds.psimps|fact"><span class="entity_def" id="BTerm.sigloc.unbounds_rel.inducts|fact"><span class="entity_def" id="BTerm.sigloc.unbounds_rel.simps|fact"><span class="entity_def" id="BTerm.sigloc.unbounds_rel.induct|fact"><span class="entity_def" id="BTerm.sigloc.unbounds_rel.cases|fact"><span class="entity_def" id="BTerm.sigloc.unbounds_rel.intros|fact"><span class="entity_def" id="BTerm.sigloc.unbounds_sumC.cong|fact"><span class="entity_def" id="BTerm.sigloc.unbounds_graph.inducts|fact"><span class="entity_def" id="BTerm.sigloc.unbounds_graph.simps|fact"><span class="entity_def" id="BTerm.sigloc.unbounds_graph.induct|fact"><span class="entity_def" id="BTerm.sigloc.unbounds_graph.cases|fact"><span class="entity_def" id="BTerm.sigloc.unbounds_graph.intros|fact"><span class="entity_def" id="BTerm.sigloc.unbounds_graph.cong|fact"><span class="entity_def" id="BTerm.sigloc.unbounds.elims|thm"><span class="entity_def" id="BTerm.sigloc.unbounds.induct|thm"><span class="entity_def" id="BTerm.sigloc.unbounds.simps(3)|thm"><span class="entity_def" id="BTerm.sigloc.unbounds.simps(2)|thm"><span class="entity_def" id="BTerm.sigloc.unbounds.simps(1)|thm"><span class="entity_def" id="BTerm.sigloc.unbounds.pelims|thm"><span class="entity_def" id="BTerm.sigloc.unbounds.cases|thm"><span class="entity_def" id="BTerm.sigloc.unbounds.termination|thm"><span class="entity_def" id="BTerm.sigloc.unbounds.pinduct|thm"><span class="entity_def" id="BTerm.sigloc.unbounds.psimps(3)|thm"><span class="entity_def" id="BTerm.sigloc.unbounds.psimps(2)|thm"><span class="entity_def" id="BTerm.sigloc.unbounds.psimps(1)|thm"><span class="entity_def" id="BTerm.sigloc.unbounds_rel.inducts|thm"><span class="entity_def" id="BTerm.sigloc.unbounds_rel.simps|thm"><span class="entity_def" id="BTerm.sigloc.unbounds_rel.induct|thm"><span class="entity_def" id="BTerm.sigloc.unbounds_rel.cases|thm"><span class="entity_def" id="BTerm.sigloc.unbounds_rel.intros(2)|thm"><span class="entity_def" id="BTerm.sigloc.unbounds_rel.intros(1)|thm"><span class="entity_def" id="BTerm.sigloc.unbounds_sumC.cong|thm"><span class="entity_def" id="BTerm.sigloc.unbounds_graph.inducts|thm"><span class="entity_def" id="BTerm.sigloc.unbounds_graph.simps|thm"><span class="entity_def" id="BTerm.sigloc.unbounds_graph.induct|thm"><span class="entity_def" id="BTerm.sigloc.unbounds_graph.cases|thm"><span class="entity_def" id="BTerm.sigloc.unbounds_graph.intros(3)|thm"><span class="entity_def" id="BTerm.sigloc.unbounds_graph.intros(2)|thm"><span class="entity_def" id="BTerm.sigloc.unbounds_graph.intros(1)|thm"><span class="entity_def" id="BTerm.sigloc.unbounds_graph.cong|thm"><span class="entity_def" id="BTerm.sigloc.unbounds_def|axiom"><span class="entity_def" id="BTerm.sigloc.unbounds_rel_def|axiom"><span class="entity_def" id="BTerm.sigloc.unbounds_sumC_def|axiom"><span class="entity_def" id="BTerm.sigloc.unbounds_graph_def|axiom"><span class="entity_def" id="BTerm.sigloc.unbounds_dom|const"><span class="entity_def" id="BTerm.sigloc.unbounds_rel|const"><span class="entity_def" id="BTerm.sigloc.unbounds_sumC|const"><span class="entity_def" id="BTerm.sigloc.unbounds_graph|const"><span>fun</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span> </span><span class="entity"><span class="entity_def" id="BTerm.sigloc.unbounds.cong|fact"><span class="entity_def" id="BTerm.sigloc.unbounds.cong|thm"><span class="entity_def" id="BTerm.sigloc.unbounds|const"><span>unbounds</span></span></span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="BTerm.html#BTerm.bterm|type"><span>bterm</span></a><span> </span><span class="main"><span>⇒</span></span><span> </span><span>nat</span><span> </span><span>set</span><span>"</span></span></span><span>  </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> 
  </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>unbounds</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="BTerm.html#BTerm.bterm.FreeVar|const"><span>FreeVar</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>x</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>ts</span></span></span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>(</span></span><span class="keyword1"><span>§fold</span></span><span> </span><span class="bound"><span>I</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>{}</span></span><span class="main"><span>,</span></span><span> </span><span class="bound"><span>t</span></span><span class="main"><span>=</span></span><span class="free"><span class="bound"><span class="entity"><span>ts</span></span></span></span><span class="main"><span>!</span></span><span class="main"><span class="bound"><span>_</span></span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>I</span></span><span> </span><span class="main"><span>∪</span></span><span> </span><span class="free"><span>unbounds</span></span><span> </span><span class="bound"><span>t</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
</span><span class="main"><span>|</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>unbounds</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="BTerm.html#BTerm.bterm.BoundVar|const"><span>BoundVar</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>i</span></span></span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>{</span></span><span class="free"><span class="bound"><span class="entity"><span>i</span></span></span></span><span class="main"><span>}</span></span><span>"</span></span></span><span>
</span><span class="main"><span>|</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>unbounds</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="BTerm.html#BTerm.bterm.Abstr|const"><span>Abstr</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>a</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>ts</span></span></span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>(</span></span><span class="keyword1"><span>§fold</span></span><span> </span><span class="bound"><span>I</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>{}</span></span><span class="main"><span>,</span></span><span> </span><span class="bound"><span>t</span></span><span class="main"><span>=</span></span><span class="free"><span class="bound"><span class="entity"><span>ts</span></span></span></span><span class="main"><span>!</span></span><span class="main"><span class="bound"><span>_</span></span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>I</span></span><span> </span><span class="main"><span>∪</span></span><span> </span><span class="free"><span>unbounds</span></span><span> </span><span class="bound"><span>t</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="BTerm.html#BTerm.sigloc.lower_indices|const"><span>.↓</span></a></span><span> </span><span class="keyword1"><span>§v</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>a</span></span></span></span><span>"</span></span></span><span> 

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="BTerm.sigloc.unbounds_freeVar_arg|fact"><span class="entity_def" id="BTerm.sigloc.unbounds_freeVar_arg|thm"><span>unbounds_freeVar_arg</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>⋀</span></span><span> </span><span class="bound"><span>i</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>i</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>length</span><span> </span><span class="free"><span>ts</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><span>unbounds</span><span> </span><span class="main"><span>(</span></span><span class="free"><span>ts</span></span><span> </span><span class="main"><span>!</span></span><span> </span><span class="bound"><span>i</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>⊆</span></span><span> </span><span>unbounds</span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="BTerm.html#BTerm.bterm.FreeVar|const"><span>FreeVar</span></a><span> </span><span class="free"><span>x</span></span><span> </span><span class="free"><span>ts</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span>  </span><a class="entity_ref" href="General.html#General.union_indexed_fold|fact"><span>union_indexed_fold</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="BTerm.sigloc.unbounds_abstr|fact"><span class="entity_def" id="BTerm.sigloc.unbounds_abstr|thm"><span>unbounds_abstr</span></span></span><span class="main"><span>:</span></span><span> 
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span>i</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>k</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>length</span><span> </span><span class="free"><span>ts</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>unbounds</span><span> </span><span class="main"><span>(</span></span><span class="free"><span>ts</span></span><span> </span><span class="main"><span>!</span></span><span> </span><span class="free"><span>k</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>⊆</span></span><span> </span><span>unbounds</span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="BTerm.html#BTerm.bterm.Abstr|const"><span>Abstr</span></a><span> </span><span class="free"><span>a</span></span><span> </span><span class="free"><span>ts</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="BTerm.html#BTerm.sigloc.raise_indices|const"><span>.↑</span></a></span><span> </span><span class="keyword1"><span>§v</span></span><span> </span><span class="free"><span>a</span></span><span> </span><span class="main"><span>∪</span></span><span> </span><a class="entity_ref" href="General.html#General.nats|const"><span>nats</span></a><span> </span><span class="main"><span>(</span></span><span class="keyword1"><span>§v</span></span><span> </span><span class="free"><span>a</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span> 
  </span><span class="keyword1"><span class="command"><span>{</span></span></span><span>
    </span><span class="keyword3"><span class="command"><span>fix</span></span></span><span> </span><span class="skolem"><span>i</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span>nat</span></span><span>
    </span><span class="keyword3"><span class="command"><span>assume</span></span></span><span> </span><span>i</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>i</span></span><span> </span><span class="main"><span>∈</span></span><span> </span><span>unbounds</span><span> </span><span class="main"><span>(</span></span><span class="free"><span>ts</span></span><span> </span><span class="main"><span>!</span></span><span> </span><span class="free"><span>k</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>∧</span></span><span> </span><span class="skolem"><span>i</span></span><span> </span><span class="main"><span>≥</span></span><span> </span><span class="keyword1"><span>§v</span></span><span> </span><span class="free"><span>a</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>i</span></span><span> </span><span class="main"><span>-</span></span><span> </span><span class="keyword1"><span>§v</span></span><span> </span><span class="free"><span>a</span></span><span> </span><span class="main"><span>∈</span></span><span> </span><span>unbounds</span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="BTerm.html#BTerm.bterm.Abstr|const"><span>Abstr</span></a><span> </span><span class="free"><span>a</span></span><span> </span><span class="free"><span>ts</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="General.html#General.union_indexed_fold|fact"><span>union_indexed_fold</span></a><span class="main"><span>)</span></span><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><span>assms</span><span class="main"><span>(</span></span><span>1</span><span class="main"><span>)</span></span><span> </span><span>i</span><span> </span><span>lower_indices_def</span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>
    </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>i</span></span><span> </span><span class="main"><span>∈</span></span><span> </span><span>unbounds</span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="BTerm.html#BTerm.bterm.Abstr|const"><span>Abstr</span></a><span> </span><span class="free"><span>a</span></span><span> </span><span class="free"><span>ts</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="BTerm.html#BTerm.sigloc.raise_indices|const"><span>.↑</span></a></span><span> </span><span class="keyword1"><span>§v</span></span><span> </span><span class="free"><span>a</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="General.html#General.union_indexed_fold|fact"><span>union_indexed_fold</span></a><span class="main"><span>)</span></span><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>smt</span></span><span> </span><span class="main"><span class="main"><span>(</span></span></span><span>verit</span><span class="main"><span class="main"><span>,</span></span></span><span> ccfv_SIG</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><span>CollectI</span><span> </span><span>UnionI</span><span> </span><span>assms</span><span class="main"><span class="main"><span>(</span></span></span><span>1</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><span>i</span><span> </span><span>le_add_diff_inverse2</span><span> </span><span>lower_indices_def</span><span> 
          </span><span>raise_indices_def</span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>}</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>force</span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="BTerm.sigloc.bfrees.elims|fact"><span class="entity_def" id="BTerm.sigloc.bfrees.induct|fact"><span class="entity_def" id="BTerm.sigloc.bfrees.simps|fact"><span class="entity_def" id="BTerm.sigloc.bfrees.pelims|fact"><span class="entity_def" id="BTerm.sigloc.bfrees.cases|fact"><span class="entity_def" id="BTerm.sigloc.bfrees.termination|fact"><span class="entity_def" id="BTerm.sigloc.bfrees.pinduct|fact"><span class="entity_def" id="BTerm.sigloc.bfrees.psimps|fact"><span class="entity_def" id="BTerm.sigloc.bfrees_rel.inducts|fact"><span class="entity_def" id="BTerm.sigloc.bfrees_rel.simps|fact"><span class="entity_def" id="BTerm.sigloc.bfrees_rel.induct|fact"><span class="entity_def" id="BTerm.sigloc.bfrees_rel.cases|fact"><span class="entity_def" id="BTerm.sigloc.bfrees_rel.intros|fact"><span class="entity_def" id="BTerm.sigloc.bfrees_graph.inducts|fact"><span class="entity_def" id="BTerm.sigloc.bfrees_graph.simps|fact"><span class="entity_def" id="BTerm.sigloc.bfrees_graph.induct|fact"><span class="entity_def" id="BTerm.sigloc.bfrees_graph.cases|fact"><span class="entity_def" id="BTerm.sigloc.bfrees_graph.intros|fact"><span class="entity_def" id="BTerm.sigloc.bfrees.elims|thm"><span class="entity_def" id="BTerm.sigloc.bfrees.induct|thm"><span class="entity_def" id="BTerm.sigloc.bfrees.simps(3)|thm"><span class="entity_def" id="BTerm.sigloc.bfrees.simps(2)|thm"><span class="entity_def" id="BTerm.sigloc.bfrees.simps(1)|thm"><span class="entity_def" id="BTerm.sigloc.bfrees.pelims|thm"><span class="entity_def" id="BTerm.sigloc.bfrees.cases|thm"><span class="entity_def" id="BTerm.sigloc.bfrees.termination|thm"><span class="entity_def" id="BTerm.sigloc.bfrees.pinduct|thm"><span class="entity_def" id="BTerm.sigloc.bfrees.psimps(3)|thm"><span class="entity_def" id="BTerm.sigloc.bfrees.psimps(2)|thm"><span class="entity_def" id="BTerm.sigloc.bfrees.psimps(1)|thm"><span class="entity_def" id="BTerm.sigloc.bfrees_rel.inducts|thm"><span class="entity_def" id="BTerm.sigloc.bfrees_rel.simps|thm"><span class="entity_def" id="BTerm.sigloc.bfrees_rel.induct|thm"><span class="entity_def" id="BTerm.sigloc.bfrees_rel.cases|thm"><span class="entity_def" id="BTerm.sigloc.bfrees_rel.intros(2)|thm"><span class="entity_def" id="BTerm.sigloc.bfrees_rel.intros(1)|thm"><span class="entity_def" id="BTerm.sigloc.bfrees_graph.inducts|thm"><span class="entity_def" id="BTerm.sigloc.bfrees_graph.simps|thm"><span class="entity_def" id="BTerm.sigloc.bfrees_graph.induct|thm"><span class="entity_def" id="BTerm.sigloc.bfrees_graph.cases|thm"><span class="entity_def" id="BTerm.sigloc.bfrees_graph.intros(3)|thm"><span class="entity_def" id="BTerm.sigloc.bfrees_graph.intros(2)|thm"><span class="entity_def" id="BTerm.sigloc.bfrees_graph.intros(1)|thm"><span class="entity_def" id="BTerm.sigloc.bfrees_def|axiom"><span class="entity_def" id="BTerm.sigloc.bfrees_rel_def|axiom"><span class="entity_def" id="BTerm.sigloc.bfrees_sumC_def|axiom"><span class="entity_def" id="BTerm.sigloc.bfrees_graph_def|axiom"><span class="entity_def" id="BTerm.sigloc.bfrees_dom|const"><span class="entity_def" id="BTerm.sigloc.bfrees_rel|const"><span class="entity_def" id="BTerm.sigloc.bfrees_sumC|const"><span class="entity_def" id="BTerm.sigloc.bfrees_graph|const"><span>fun</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span> </span><span class="entity"><span class="entity_def" id="BTerm.sigloc.bfrees|const"><span>bfrees</span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="BTerm.html#BTerm.bterm|type"><span>bterm</span></a><span> </span><span class="main"><span>⇒</span></span><span> </span><a class="entity_ref" href="NTerm.html#NTerm.variables|type"><span>variables</span></a><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> 
  </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>bfrees</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="BTerm.html#BTerm.bterm.FreeVar|const"><span>FreeVar</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>x</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>ts</span></span></span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> 
     </span><span class="main"><span>(</span></span><span class="keyword1"><span>§fold</span></span><span> </span><span class="bound"><span>X</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>{</span></span><span class="main"><span>(</span></span><span class="free"><span class="bound"><span class="entity"><span>x</span></span></span></span><span class="main"><span>,</span></span><span> </span><span>length</span><span> </span><span class="free"><span class="bound"><span class="entity"><span>ts</span></span></span></span><span class="main"><span>)</span></span><span class="main"><span>}</span></span><span class="main"><span>,</span></span><span> </span><span class="bound"><span>t</span></span><span class="main"><span>=</span></span><span class="free"><span class="bound"><span class="entity"><span>ts</span></span></span></span><span class="main"><span>!</span></span><span class="main"><span class="bound"><span>_</span></span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>X</span></span><span> </span><span class="main"><span>∪</span></span><span> </span><span class="free"><span>bfrees</span></span><span> </span><span class="bound"><span>t</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
</span><span class="main"><span>|</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>bfrees</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="BTerm.html#BTerm.bterm.BoundVar|const"><span>BoundVar</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>i</span></span></span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>{}</span></span><span>"</span></span></span><span> 
</span><span class="main"><span>|</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>bfrees</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="BTerm.html#BTerm.bterm.Abstr|const"><span>Abstr</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>a</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>ts</span></span></span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>(</span></span><span class="keyword1"><span>§fold</span></span><span> </span><span class="bound"><span>X</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>{}</span></span><span class="main"><span>,</span></span><span> </span><span class="bound"><span>t</span></span><span class="main"><span>=</span></span><span class="free"><span class="bound"><span class="entity"><span>ts</span></span></span></span><span class="main"><span>!</span></span><span class="main"><span class="bound"><span>_</span></span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>X</span></span><span> </span><span class="main"><span>∪</span></span><span> </span><span class="free"><span>bfrees</span></span><span> </span><span class="bound"><span>t</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> 

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="BTerm.sigloc.bfrees_freeVar_arg|fact"><span class="entity_def" id="BTerm.sigloc.bfrees_freeVar_arg|thm"><span>bfrees_freeVar_arg</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>⋀</span></span><span> </span><span class="bound"><span>i</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>i</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>length</span><span> </span><span class="free"><span>ts</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><a class="entity_ref" href="BTerm.html#BTerm.sigloc.bfrees|const"><span>bfrees</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>ts</span></span><span> </span><span class="main"><span>!</span></span><span> </span><span class="bound"><span>i</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>⊆</span></span><span> </span><a class="entity_ref" href="BTerm.html#BTerm.sigloc.bfrees|const"><span>bfrees</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="BTerm.html#BTerm.bterm.FreeVar|const"><span>FreeVar</span></a><span> </span><span class="free"><span>x</span></span><span> </span><span class="free"><span>ts</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="General.html#General.union_indexed_fold|fact"><span>union_indexed_fold</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="BTerm.sigloc.bfrees_abstr_arg|fact"><span class="entity_def" id="BTerm.sigloc.bfrees_abstr_arg|thm"><span>bfrees_abstr_arg</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>⋀</span></span><span> </span><span class="bound"><span>i</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>i</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>length</span><span> </span><span class="free"><span>ts</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><a class="entity_ref" href="BTerm.html#BTerm.sigloc.bfrees|const"><span>bfrees</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>ts</span></span><span> </span><span class="main"><span>!</span></span><span> </span><span class="bound"><span>i</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>⊆</span></span><span> </span><a class="entity_ref" href="BTerm.html#BTerm.sigloc.bfrees|const"><span>bfrees</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="BTerm.html#BTerm.bterm.Abstr|const"><span>Abstr</span></a><span> </span><span class="free"><span>a</span></span><span> </span><span class="free"><span>ts</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="General.html#General.union_indexed_fold|fact"><span>union_indexed_fold</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>subsection</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>‹</span><span>Wellformedness</span><span>›</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="BTerm.sigloc.bwf.elims|fact"><span class="entity_def" id="BTerm.sigloc.bwf.induct|fact"><span class="entity_def" id="BTerm.sigloc.bwf.simps|fact"><span class="entity_def" id="BTerm.sigloc.bwf.pelims|fact"><span class="entity_def" id="BTerm.sigloc.bwf.cases|fact"><span class="entity_def" id="BTerm.sigloc.bwf.termination|fact"><span class="entity_def" id="BTerm.sigloc.bwf.pinduct|fact"><span class="entity_def" id="BTerm.sigloc.bwf.psimps|fact"><span class="entity_def" id="BTerm.sigloc.bwf_rel.inducts|fact"><span class="entity_def" id="BTerm.sigloc.bwf_rel.simps|fact"><span class="entity_def" id="BTerm.sigloc.bwf_rel.induct|fact"><span class="entity_def" id="BTerm.sigloc.bwf_rel.cases|fact"><span class="entity_def" id="BTerm.sigloc.bwf_rel.intros|fact"><span class="entity_def" id="BTerm.sigloc.bwf_sumC.cong|fact"><span class="entity_def" id="BTerm.sigloc.bwf_graph.inducts|fact"><span class="entity_def" id="BTerm.sigloc.bwf_graph.simps|fact"><span class="entity_def" id="BTerm.sigloc.bwf_graph.induct|fact"><span class="entity_def" id="BTerm.sigloc.bwf_graph.cases|fact"><span class="entity_def" id="BTerm.sigloc.bwf_graph.intros|fact"><span class="entity_def" id="BTerm.sigloc.bwf_graph.cong|fact"><span class="entity_def" id="BTerm.sigloc.bwf.elims(3)|thm"><span class="entity_def" id="BTerm.sigloc.bwf.elims(2)|thm"><span class="entity_def" id="BTerm.sigloc.bwf.elims(1)|thm"><span class="entity_def" id="BTerm.sigloc.bwf.induct|thm"><span class="entity_def" id="BTerm.sigloc.bwf.simps(3)|thm"><span class="entity_def" id="BTerm.sigloc.bwf.simps(2)|thm"><span class="entity_def" id="BTerm.sigloc.bwf.simps(1)|thm"><span class="entity_def" id="BTerm.sigloc.bwf.pelims(3)|thm"><span class="entity_def" id="BTerm.sigloc.bwf.pelims(2)|thm"><span class="entity_def" id="BTerm.sigloc.bwf.pelims(1)|thm"><span class="entity_def" id="BTerm.sigloc.bwf.cases|thm"><span class="entity_def" id="BTerm.sigloc.bwf.termination|thm"><span class="entity_def" id="BTerm.sigloc.bwf.pinduct|thm"><span class="entity_def" id="BTerm.sigloc.bwf.psimps(3)|thm"><span class="entity_def" id="BTerm.sigloc.bwf.psimps(2)|thm"><span class="entity_def" id="BTerm.sigloc.bwf.psimps(1)|thm"><span class="entity_def" id="BTerm.sigloc.bwf_rel.inducts|thm"><span class="entity_def" id="BTerm.sigloc.bwf_rel.simps|thm"><span class="entity_def" id="BTerm.sigloc.bwf_rel.induct|thm"><span class="entity_def" id="BTerm.sigloc.bwf_rel.cases|thm"><span class="entity_def" id="BTerm.sigloc.bwf_rel.intros(2)|thm"><span class="entity_def" id="BTerm.sigloc.bwf_rel.intros(1)|thm"><span class="entity_def" id="BTerm.sigloc.bwf_sumC.cong|thm"><span class="entity_def" id="BTerm.sigloc.bwf_graph.inducts|thm"><span class="entity_def" id="BTerm.sigloc.bwf_graph.simps|thm"><span class="entity_def" id="BTerm.sigloc.bwf_graph.induct|thm"><span class="entity_def" id="BTerm.sigloc.bwf_graph.cases|thm"><span class="entity_def" id="BTerm.sigloc.bwf_graph.intros(3)|thm"><span class="entity_def" id="BTerm.sigloc.bwf_graph.intros(2)|thm"><span class="entity_def" id="BTerm.sigloc.bwf_graph.intros(1)|thm"><span class="entity_def" id="BTerm.sigloc.bwf_graph.cong|thm"><span class="entity_def" id="BTerm.sigloc.bwf_def|axiom"><span class="entity_def" id="BTerm.sigloc.bwf_rel_def|axiom"><span class="entity_def" id="BTerm.sigloc.bwf_sumC_def|axiom"><span class="entity_def" id="BTerm.sigloc.bwf_graph_def|axiom"><span class="entity_def" id="BTerm.sigloc.bwf_dom|const"><span class="entity_def" id="BTerm.sigloc.bwf_rel|const"><span class="entity_def" id="BTerm.sigloc.bwf_sumC|const"><span class="entity_def" id="BTerm.sigloc.bwf_graph|const"><span>fun</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span> </span><span class="entity"><span class="entity_def" id="BTerm.sigloc.bwf.cong|fact"><span class="entity_def" id="BTerm.sigloc.bwf.cong|thm"><span class="entity_def" id="BTerm.sigloc.bwf|const"><span>bwf</span></span></span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="BTerm.html#BTerm.bterm|type"><span>bterm</span></a><span> </span><span class="main"><span>⇒</span></span><span> </span><span>bool</span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span>
  </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>bwf</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="BTerm.html#BTerm.bterm.FreeVar|const"><span>FreeVar</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>x</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>ts</span></span></span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>∀</span></span><span> </span><span class="bound"><span>t</span></span><span class="main"><span>=</span></span><span class="free"><span class="bound"><span class="entity"><span>ts</span></span></span></span><span class="main"><span>!</span></span><span class="main"><span class="bound"><span>_</span></span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>bwf</span></span><span> </span><span class="bound"><span>t</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
</span><span class="main"><span>|</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>bwf</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="BTerm.html#BTerm.bterm.BoundVar|const"><span>BoundVar</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>i</span></span></span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span>True</span><span>"</span></span></span><span>
</span><span class="main"><span>|</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>bwf</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="BTerm.html#BTerm.bterm.Abstr|const"><span>Abstr</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>a</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>ts</span></span></span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>✓</span></span><span class="free"><span class="bound"><span class="entity"><span>a</span></span></span></span><span> </span><span class="main"><span>∧</span></span><span> </span><span class="keyword1"><span>§a</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>a</span></span></span></span><span> </span><span class="main"><span>=</span></span><span> </span><span>length</span><span> </span><span class="free"><span class="bound"><span class="entity"><span>ts</span></span></span></span><span> </span><span class="main"><span>∧</span></span><span> 
     </span><span class="main"><span>(</span></span><span class="main"><span>∀</span></span><span> </span><span class="bound"><span>t</span></span><span class="main"><span>=</span></span><span class="free"><span class="bound"><span class="entity"><span>ts</span></span></span></span><span class="main"><span>!</span></span><span class="bound"><span>i</span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>bwf</span></span><span> </span><span class="bound"><span>t</span></span><span> </span><span class="main"><span>∧</span></span><span> </span><span>unbounds</span><span> </span><span class="bound"><span>t</span></span><span> </span><span class="main"><span>∩</span></span><span> </span><a class="entity_ref" href="General.html#General.nats|const"><span>nats</span></a><span> </span><span class="main"><span>(</span></span><span class="keyword1"><span>§v</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>a</span></span></span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>⊆</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>a</span></span></span></span><span class="main"><span>!♮</span></span><span class="bound"><span>i</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="BTerm.sigloc.bwf_freeVar_arg|fact"><span class="entity_def" id="BTerm.sigloc.bwf_freeVar_arg|thm"><span>bwf_freeVar_arg</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>bwf</span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="BTerm.html#BTerm.bterm.FreeVar|const"><span>FreeVar</span></a><span> </span><span class="free"><span>x</span></span><span> </span><span class="free"><span>ts</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><span class="free"><span>i</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>length</span><span> </span><span class="free"><span>ts</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><span>bwf</span><span> </span><span class="main"><span>(</span></span><span class="free"><span>ts</span></span><span class="main"><span>!</span></span><span class="free"><span>i</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="BTerm.sigloc.bwf_abstr_arg|fact"><span class="entity_def" id="BTerm.sigloc.bwf_abstr_arg|thm"><span>bwf_abstr_arg</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>bwf</span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="BTerm.html#BTerm.bterm.Abstr|const"><span>Abstr</span></a><span> </span><span class="free"><span>a</span></span><span> </span><span class="free"><span>ts</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><span class="free"><span>i</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>length</span><span> </span><span class="free"><span>ts</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><span>bwf</span><span> </span><span class="main"><span>(</span></span><span class="free"><span>ts</span></span><span class="main"><span>!</span></span><span class="free"><span>i</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="General.html#General.list_indexed_forall_def|fact"><span>list_indexed_forall_def</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="BTerm.sigloc.unbounds_bwf_abstr|fact"><span class="entity_def" id="BTerm.sigloc.unbounds_bwf_abstr|thm"><span>unbounds_bwf_abstr</span></span></span><span class="main"><span>:</span></span><span> 
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span>i</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>k</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>length</span><span> </span><span class="free"><span>ts</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span>wf</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>bwf</span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="BTerm.html#BTerm.bterm.Abstr|const"><span>Abstr</span></a><span> </span><span class="free"><span>a</span></span><span> </span><span class="free"><span>ts</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>unbounds</span><span> </span><span class="main"><span>(</span></span><span class="free"><span>ts</span></span><span> </span><span class="main"><span>!</span></span><span> </span><span class="free"><span>k</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>⊆</span></span><span> </span><span>unbounds</span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="BTerm.html#BTerm.bterm.Abstr|const"><span>Abstr</span></a><span> </span><span class="free"><span>a</span></span><span> </span><span class="free"><span>ts</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="BTerm.html#BTerm.sigloc.raise_indices|const"><span>.↑</span></a></span><span> </span><span class="keyword1"><span>§v</span></span><span> </span><span class="free"><span>a</span></span><span> </span><span class="main"><span>∪</span></span><span> </span><span class="free"><span>a</span></span><span class="main"><span>!♮</span></span><span class="free"><span>k</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span> 
  </span><span class="keyword1"><span class="command"><span>{</span></span></span><span>
    </span><span class="keyword3"><span class="command"><span>fix</span></span></span><span> </span><span class="skolem"><span>i</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span>nat</span></span><span>
    </span><span class="keyword3"><span class="command"><span>assume</span></span></span><span> </span><span>i</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>i</span></span><span> </span><span class="main"><span>∈</span></span><span> </span><span>unbounds</span><span> </span><span class="main"><span>(</span></span><span class="free"><span>ts</span></span><span> </span><span class="main"><span>!</span></span><span> </span><span class="free"><span>k</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>∧</span></span><span> </span><span class="skolem"><span>i</span></span><span> </span><span class="main"><span>≥</span></span><span> </span><span class="keyword1"><span>§v</span></span><span> </span><span class="free"><span>a</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>i</span></span><span> </span><span class="main"><span>-</span></span><span> </span><span class="keyword1"><span>§v</span></span><span> </span><span class="free"><span>a</span></span><span> </span><span class="main"><span>∈</span></span><span> </span><span>unbounds</span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="BTerm.html#BTerm.bterm.Abstr|const"><span>Abstr</span></a><span> </span><span class="free"><span>a</span></span><span> </span><span class="free"><span>ts</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="General.html#General.union_indexed_fold|fact"><span>union_indexed_fold</span></a><span class="main"><span>)</span></span><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><span>assms</span><span class="main"><span>(</span></span><span>1</span><span class="main"><span>)</span></span><span> </span><span>i</span><span> </span><span>lower_indices_def</span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>
    </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>i</span></span><span> </span><span class="main"><span>∈</span></span><span> </span><span>unbounds</span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="BTerm.html#BTerm.bterm.Abstr|const"><span>Abstr</span></a><span> </span><span class="free"><span>a</span></span><span> </span><span class="free"><span>ts</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="BTerm.html#BTerm.sigloc.raise_indices|const"><span>.↑</span></a></span><span> </span><span class="keyword1"><span>§v</span></span><span> </span><span class="free"><span>a</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="General.html#General.union_indexed_fold|fact"><span>union_indexed_fold</span></a><span class="main"><span>)</span></span><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>smt</span></span><span> </span><span class="main"><span class="main"><span>(</span></span></span><span>verit</span><span class="main"><span class="main"><span>,</span></span></span><span> ccfv_SIG</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><span>CollectI</span><span> </span><span>UnionI</span><span> </span><span>assms</span><span class="main"><span class="main"><span>(</span></span></span><span>1</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><span>i</span><span> </span><span>le_add_diff_inverse2</span><span> </span><span>lower_indices_def</span><span> 
          </span><span>raise_indices_def</span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>}</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>note</span></span></span><span> </span><span>left</span><span> </span><span class="main"><span>=</span></span><span> </span><span>this</span><span>
  </span><span class="keyword1"><span class="command"><span>{</span></span></span><span>
    </span><span class="keyword3"><span class="command"><span>fix</span></span></span><span> </span><span class="skolem"><span>i</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span>nat</span></span><span>
    </span><span class="keyword3"><span class="command"><span>assume</span></span></span><span> </span><span>i</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>i</span></span><span> </span><span class="main"><span>∈</span></span><span> </span><span>unbounds</span><span> </span><span class="main"><span>(</span></span><span class="free"><span>ts</span></span><span> </span><span class="main"><span>!</span></span><span> </span><span class="free"><span>k</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>∧</span></span><span> </span><span class="skolem"><span>i</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span class="keyword1"><span>§v</span></span><span> </span><span class="free"><span>a</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>unbounds</span><span> </span><span class="main"><span>(</span></span><span class="free"><span>ts</span></span><span class="main"><span>!</span></span><span class="free"><span>k</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>∩</span></span><span> </span><a class="entity_ref" href="General.html#General.nats|const"><span>nats</span></a><span> </span><span class="main"><span>(</span></span><span class="keyword1"><span>§v</span></span><span> </span><span class="free"><span>a</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>⊆</span></span><span> </span><span class="free"><span>a</span></span><span class="main"><span>!♮</span></span><span class="free"><span>k</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><span>wf</span><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><span>assms</span><span class="main"><span class="main"><span>(</span></span></span><span>1</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="General.html#General.list_indexed_forall_def|fact"><span>list_indexed_forall_def</span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>with</span></span></span><span> </span><span>i</span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span>i'</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>i</span></span><span> </span><span class="main"><span>∈</span></span><span> </span><span class="free"><span>a</span></span><span class="main"><span>!♮</span></span><span class="free"><span>k</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><span>in_mono</span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>}</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>note</span></span></span><span> </span><span>right</span><span> </span><span class="main"><span>=</span></span><span> </span><span>this</span><span>
  </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><span>left</span><span> </span><span>right</span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>fastforce</span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="BTerm.sigloc.upper_bound_unbounds_abstr_arg|fact"><span class="entity_def" id="BTerm.sigloc.upper_bound_unbounds_abstr_arg|thm"><span>upper_bound_unbounds_abstr_arg</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span>i</span><span class="main"><span>:</span></span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>i</span></span><span> </span><span class="main"><span>∈</span></span><span> </span><span class="main"><span>⋃</span></span><span> </span><span class="main"><span>{</span></span><span> </span><span>unbounds</span><span> </span><span class="bound"><span>t</span></span><span> </span><span class="main"><span>|</span></span><span> </span><span class="bound"><span>t</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>t</span></span><span> </span><span class="main"><span>∈</span></span><span> </span><span>set</span><span> </span><span class="free"><span>ts</span></span><span> </span><span class="main"><span>}</span></span><span>"</span></span></span><span> 
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>i</span></span><span> </span><span class="main"><span>∈</span></span><span> </span><span>unbounds</span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="BTerm.html#BTerm.bterm.Abstr|const"><span>Abstr</span></a><span> </span><span class="free"><span>a</span></span><span> </span><span class="free"><span>ts</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="BTerm.html#BTerm.sigloc.raise_indices|const"><span>.↑</span></a></span><span> </span><span class="keyword1"><span>§v</span></span><span> </span><span class="free"><span>a</span></span><span> </span><span class="main"><span>∪</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="General.html#General.nats|const"><span>nats</span></a><span> </span><span class="main"><span>(</span></span><span class="keyword1"><span>§v</span></span><span> </span><span class="free"><span>a</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span>conv</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>⋃</span></span><span> </span><span class="main"><span>{</span></span><span> </span><span>unbounds</span><span> </span><span class="bound"><span>t</span></span><span> </span><span class="main"><span>|</span></span><span> </span><span class="bound"><span>t</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>t</span></span><span> </span><span class="main"><span>∈</span></span><span> </span><span>set</span><span> </span><span class="free"><span>ts</span></span><span> </span><span class="main"><span>}</span></span><span> </span><span class="main"><span>=</span></span><span>  </span><span class="main"><span>⋃</span></span><span> </span><span class="main"><span>{</span></span><span> </span><span>unbounds</span><span> </span><span class="main"><span>(</span></span><span class="free"><span>ts</span></span><span class="main"><span>!</span></span><span class="bound"><span>k</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>|</span></span><span> </span><span class="bound"><span>k</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>k</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>length</span><span> </span><span class="free"><span>ts</span></span><span> </span><span class="main"><span>}</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><span>in_set_conv_nth</span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>with</span></span></span><span> </span><span>i</span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>i</span></span><span> </span><span class="main"><span>∈</span></span><span> </span><span class="main"><span>⋃</span></span><span> </span><span class="main"><span>{</span></span><span> </span><span>unbounds</span><span> </span><span class="main"><span>(</span></span><span class="free"><span>ts</span></span><span class="main"><span>!</span></span><span class="bound"><span>k</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>|</span></span><span> </span><span class="bound"><span>k</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>k</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>length</span><span> </span><span class="free"><span>ts</span></span><span> </span><span class="main"><span>}</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>i</span></span><span> </span><span class="main"><span>∈</span></span><span> </span><span class="main"><span>⋃</span></span><span> </span><span class="main"><span>{</span></span><span> </span><span>unbounds</span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="BTerm.html#BTerm.bterm.Abstr|const"><span>Abstr</span></a><span> </span><span class="free"><span>a</span></span><span> </span><span class="free"><span>ts</span></span><span class="main"><span>)</span></span><span class="main"><a class="entity_ref" href="BTerm.html#BTerm.sigloc.raise_indices|const"><span>.↑</span></a></span><span> </span><span class="keyword1"><span>§v</span></span><span> </span><span class="free"><span>a</span></span><span> </span><span class="main"><span>∪</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="General.html#General.nats|const"><span>nats</span></a><span> </span><span class="main"><span>(</span></span><span class="keyword1"><span>§v</span></span><span> </span><span class="free"><span>a</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>|</span></span><span> </span><span class="bound"><span>k</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>k</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>length</span><span> </span><span class="free"><span>ts</span></span><span> </span><span class="main"><span>}</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><span>unbounds_abstr</span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>fastforce</span></span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>blast</span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="BTerm.sigloc.upper_bound_erased_unbounds_abstr_arg|fact"><span class="entity_def" id="BTerm.sigloc.upper_bound_erased_unbounds_abstr_arg|thm"><span>upper_bound_erased_unbounds_abstr_arg</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span>i</span><span class="main"><span>:</span></span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>i</span></span><span> </span><span class="main"><span>∈</span></span><span> </span><span class="main"><span>⋃</span></span><span> </span><span class="main"><span>{</span></span><span> </span><span>unbounds</span><span> </span><span class="bound"><span>t</span></span><span> </span><span class="main"><span>|</span></span><span> </span><span class="bound"><span>t</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>t</span></span><span> </span><span class="main"><span>∈</span></span><span> </span><span>set</span><span> </span><span class="free"><span>ts</span></span><span> </span><span class="main"><span>}</span></span><span> </span><span class="main"><a class="entity_ref" href="BTerm.html#BTerm.sigloc.lower_indices|const"><span>.↓</span></a></span><span> </span><span class="keyword1"><span>§v</span></span><span> </span><span class="free"><span>a</span></span><span> </span><span class="main"><a class="entity_ref" href="BTerm.html#BTerm.sigloc.raise_indices|const"><span>.↑</span></a></span><span> </span><span class="keyword1"><span>§v</span></span><span> </span><span class="free"><span>a</span></span><span>"</span></span></span><span> 
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>i</span></span><span> </span><span class="main"><span>∈</span></span><span> </span><span>unbounds</span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="BTerm.html#BTerm.bterm.Abstr|const"><span>Abstr</span></a><span> </span><span class="free"><span>a</span></span><span> </span><span class="free"><span>ts</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="BTerm.html#BTerm.sigloc.raise_indices|const"><span>.↑</span></a></span><span> </span><span class="keyword1"><span>§v</span></span><span> </span><span class="free"><span>a</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span> 
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span>i1</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>i</span></span><span> </span><span class="main"><span>∈</span></span><span> </span><span>unbounds</span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="BTerm.html#BTerm.bterm.Abstr|const"><span>Abstr</span></a><span> </span><span class="free"><span>a</span></span><span> </span><span class="free"><span>ts</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="BTerm.html#BTerm.sigloc.raise_indices|const"><span>.↑</span></a></span><span> </span><span class="keyword1"><span>§v</span></span><span> </span><span class="free"><span>a</span></span><span> </span><span class="main"><span>∪</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="General.html#General.nats|const"><span>nats</span></a><span> </span><span class="main"><span>(</span></span><span class="keyword1"><span>§v</span></span><span> </span><span class="free"><span>a</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>meson</span></span><span> </span><span>erase_bottom_indices</span><span> </span><span>i</span><span> </span><span>upper_bound_unbounds_abstr_arg</span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span>i2</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>i</span></span><span> </span><span class="main"><span>≥</span></span><span> </span><span class="keyword1"><span>§v</span></span><span> </span><span class="free"><span>a</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><span>erase_bottom_indices</span><span> </span><span>i</span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>blast</span></span><span>
  </span><span class="keyword1"><span class="command"><span>from</span></span></span><span> </span><span>i1</span><span> </span><span>i2</span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>fastforce</span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword2"><span class="keyword"><span>end</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>subsection</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>‹</span><span>Environments</span><span>›</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>type_synonym</span></span></span><span> </span><span class="tfree"><span>'a</span></span><span> </span><span class="entity_def" id="BTerm.env|type"><span>env</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>nat</span><span> </span><span class="main"><span>⇒</span></span><span> </span><span class="tfree"><span>'a</span></span><span>"</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="BTerm.update_env_def|fact"><span class="entity_def" id="BTerm.update_env_def|thm"><span class="entity_def" id="BTerm.update_env_def_raw|axiom"><span>definition</span></span></span></span></span></span><span> </span><span class="entity"><span class="entity_def" id="BTerm.update_env|const"><span>update_env</span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="tfree"><span>'a</span></span><span> </span><a class="entity_ref" href="BTerm.html#BTerm.env|type"><span>env</span></a><span> </span><span class="main"><span>⇒</span></span><span> </span><span>nat</span><span> </span><span class="main"><span>⇒</span></span><span> </span><span>nat</span><span> </span><span>set</span><span> </span><span class="main"><span>⇒</span></span><span> </span><span class="tfree"><span>'a</span></span><span> </span><span>list</span><span> </span><span class="main"><span>⇒</span></span><span> </span><span class="tfree"><span>'a</span></span><span> </span><a class="entity_ref" href="BTerm.html#BTerm.env|type"><span>env</span></a><span>"</span></span></span><span> 
  </span><span class="main"><span>(</span></span><span class="quoted"><span>"</span><span>_</span><span class="keyword1"><span>↑</span></span><span>_</span><span class="keyword1"><span>{</span></span><span>_</span><span> </span><span class="keyword1"><span>:=</span></span><span> </span><span>_</span><span class="keyword1"><span>}</span></span><span>"</span></span><span> </span><span class="main"><span>[</span></span><span>1000</span><span class="main"><span>,</span></span><span> 51</span><span class="main"><span>,</span></span><span> 51</span><span class="main"><span>,</span></span><span> 51</span><span class="main"><span>]</span></span><span> 1000</span><span class="main"><span>)</span></span><span>
</span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> 
  </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>update_env</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>env</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>m</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>js</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>xs</span></span></span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>λ</span></span><span> </span><span class="bound"><span>j</span></span><span class="main"><span>.</span></span><span> 
     </span><span class="main"><span>(</span></span><span class="keyword1"><span>case</span></span><span> </span><a class="entity_ref" href="General.html#General.index_of|const"><span>index_of</span></a><span> </span><span class="bound"><span>j</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="General.html#General.sorted_list|const"><span>sorted_list</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>js</span></span></span></span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><span>of</span></span><span>
        Some </span><span class="bound"><span>i</span></span><span> </span><span class="main"><span>⇒</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>xs</span></span></span></span><span class="main"><span>!</span></span><span class="bound"><span>i</span></span><span>
      </span><span class="main"><span>|</span></span><span> None </span><span class="main"><span>⇒</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>env</span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="bound"><span>j</span></span><span> </span><span class="main"><span>-</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>m</span></span></span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>abbreviation</span></span></span><span> </span><span class="entity"><span class="entity_def" id="BTerm.raise_env|const"><span>raise_env</span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="tfree"><span>'a</span></span><span> </span><a class="entity_ref" href="BTerm.html#BTerm.env|type"><span>env</span></a><span> </span><span class="main"><span>⇒</span></span><span> </span><span>nat</span><span> </span><span class="main"><span>⇒</span></span><span> </span><span class="tfree"><span>'a</span></span><span> </span><a class="entity_ref" href="BTerm.html#BTerm.env|type"><span>env</span></a><span>"</span></span></span><span>
  </span><span class="main"><span>(</span></span><span class="quoted"><span>"</span><span>_</span><span class="keyword1"><span>↑</span></span><span>_</span><span class="keyword1"><span>{}</span></span><span>"</span></span><span> </span><span class="main"><span>[</span></span><span>1000</span><span class="main"><span>,</span></span><span> 51</span><span class="main"><span>]</span></span><span> 1000</span><span class="main"><span>)</span></span><span>
</span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> 
  </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span class="bound"><span class="entity"><span>env</span></span></span></span><span> </span><span class="main"><span class="free"><span>↑</span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>m</span></span></span></span><span> </span><span class="main"><span class="free"><span>{}</span></span></span><span> </span><span class="main"><span>≡</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>env</span></span></span></span><span> </span><span class="main"><a class="entity_ref" href="BTerm.html#BTerm.update_env|const"><span>↑</span></a></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>m</span></span></span></span><span> </span><span class="main"><a class="entity_ref" href="BTerm.html#BTerm.update_env|const"><span>{</span></a></span><span> </span><span class="main"><span>{}</span></span><span> </span><span class="main"><a class="entity_ref" href="BTerm.html#BTerm.update_env|const"><span>:=</span></a></span><span> </span><span class="main"><span>[]</span></span><span> </span><span class="main"><a class="entity_ref" href="BTerm.html#BTerm.update_env|const"><span>}</span></a></span><span>"</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="BTerm.env_app_noupdate|fact"><span class="entity_def" id="BTerm.env_app_noupdate|thm"><span>env_app_noupdate</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>finite</span><span> </span><span class="free"><span>js</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><span class="free"><span>j</span></span><span> </span><span class="main"><span>∉</span></span><span> </span><span class="free"><span>js</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><span class="free"><span>env</span></span><span> </span><span class="main"><a class="entity_ref" href="BTerm.html#BTerm.update_env|const"><span>↑</span></a></span><span> </span><span class="free"><span>m</span></span><span> </span><span class="main"><a class="entity_ref" href="BTerm.html#BTerm.update_env|const"><span>{</span></a></span><span> </span><span class="free"><span>js</span></span><span> </span><span class="main"><a class="entity_ref" href="BTerm.html#BTerm.update_env|const"><span>:=</span></a></span><span> </span><span class="free"><span>xs</span></span><span> </span><span class="main"><a class="entity_ref" href="BTerm.html#BTerm.update_env|const"><span>}</span></a></span><span> </span><span class="free"><span>j</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="free"><span>env</span></span><span> </span><span class="main"><a class="entity_ref" href="BTerm.html#BTerm.raise_env|const"><span>↑</span></a></span><span> </span><span class="free"><span>m</span></span><span> </span><span class="main"><a class="entity_ref" href="BTerm.html#BTerm.raise_env|const"><span>{}</span></a></span><span> </span><span class="free"><span>j</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="BTerm.html#BTerm.update_env_def|fact"><span>update_env_def</span></a><span> </span><a class="entity_ref" href="General.html#General.no_index_sorted_list|fact"><span>no_index_sorted_list</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="BTerm.env_raised_app|fact"><span class="entity_def" id="BTerm.env_raised_app|thm"><span>env_raised_app</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>env</span></span><span> </span><span class="main"><a class="entity_ref" href="BTerm.html#BTerm.raise_env|const"><span>↑</span></a></span><span> </span><span class="free"><span>m</span></span><span> </span><span class="main"><a class="entity_ref" href="BTerm.html#BTerm.raise_env|const"><span>{}</span></a></span><span> </span><span class="free"><span>j</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="free"><span>env</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>j</span></span><span> </span><span class="main"><span>-</span></span><span> </span><span class="free"><span>m</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="General.html#General.no_index_sorted_list|fact"><span>no_index_sorted_list</span></a><span> </span><a class="entity_ref" href="BTerm.html#BTerm.update_env_def|fact"><span>update_env_def</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="BTerm.env_app_update|fact"><span class="entity_def" id="BTerm.env_app_update|thm"><span>env_app_update</span></span></span><span class="main"><span>:</span></span><span> 
  </span><span class="quoted"><span class="quoted"><span>"</span><span>finite</span><span> </span><span class="free"><span>js</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><span class="free"><span>j</span></span><span> </span><span class="main"><span>∈</span></span><span> </span><span class="free"><span>js</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><span class="free"><span>env</span></span><span> </span><span class="main"><a class="entity_ref" href="BTerm.html#BTerm.update_env|const"><span>↑</span></a></span><span> </span><span class="free"><span>m</span></span><span> </span><span class="main"><a class="entity_ref" href="BTerm.html#BTerm.update_env|const"><span>{</span></a></span><span> </span><span class="free"><span>js</span></span><span> </span><span class="main"><a class="entity_ref" href="BTerm.html#BTerm.update_env|const"><span>:=</span></a></span><span> </span><span class="free"><span>us</span></span><span> </span><span class="main"><a class="entity_ref" href="BTerm.html#BTerm.update_env|const"><span>}</span></a></span><span> </span><span class="free"><span>j</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="free"><span>us</span></span><span> </span><span class="main"><span>!</span></span><span> </span><span>the</span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="General.html#General.index_of|const"><span>index_of</span></a><span> </span><span class="free"><span>j</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="General.html#General.sorted_list|const"><span>sorted_list</span></a><span> </span><span class="free"><span>js</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><a class="entity_ref" href="General.html#General.index_of_is_None|fact"><span>index_of_is_None</span></a><span> </span><span>option.case_eq_if</span><span> </span><a class="entity_ref" href="General.html#General.set_sorted_list|fact"><span>set_sorted_list</span></a><span> </span><a class="entity_ref" href="BTerm.html#BTerm.update_env_def|fact"><span>update_env_def</span></a><span class="main"><span>)</span></span><span>
  
</span><span class="keyword1"><span class="command"><span>context</span></span></span><span> </span><a class="entity_ref" href="Locales.html#Locales.algloc|locale"><span>algloc</span></a><span> </span><span class="keyword2"><span class="keyword"><span>begin</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="BTerm.algloc.env_quotient_def|fact"><span class="entity_def" id="BTerm.algloc.env_quotient_def|thm"><span class="entity_def" id="BTerm.algloc.env_quotient_def_raw|axiom"><span>definition</span></span></span></span></span></span><span> </span><span class="entity"><span class="entity_def" id="BTerm.algloc.env_quotient.cong|fact"><span class="entity_def" id="BTerm.algloc.env_quotient.cong|thm"><span class="entity_def" id="BTerm.algloc.env_quotient|const"><span>env_quotient</span></span></span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>nat</span><span> </span><span>set</span><span> </span><span class="main"><span>⇒</span></span><span> </span><span class="main"><span>(</span></span><span class="tfree"><span>'a</span></span><span> </span><a class="entity_ref" href="BTerm.html#BTerm.env|type"><span>env</span></a><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="Quotients.html#Quotients.quotient|type"><span>quotient</span></a><span>"</span></span></span><span> </span><span class="main"><span>(</span></span><span class="quoted"><span>"</span><span class="keyword1"><span>𝔼</span></span><span>"</span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>env_quotient</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>I</span></span></span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><a class="entity_ref" href="Quotients.html#Quotients.set_quotient|const"><span>/≡</span></a></span><span class="free"><span class="bound"><span class="entity"><span>I</span></span></span></span><span> </span><span class="main"><a class="entity_ref" href="Quotients.html#Quotients.fun_quotient|const"><span>/⇒</span></a></span><span> </span><span class="keyword1"><span>𝒰</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="BTerm.algloc.env_subset|fact"><span class="entity_def" id="BTerm.algloc.env_subset|thm"><span>env_subset</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>A</span></span><span> </span><span class="main"><span>⊆</span></span><span> </span><span class="free"><span>B</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><span class="main"><span>𝔼</span></span><span> </span><span class="free"><span>B</span></span><span> </span><span class="main"><a class="entity_ref" href="Quotients.html#Quotients.qsubset_weak|const"><span>/≤</span></a></span><span> </span><span class="main"><span>𝔼</span></span><span> </span><span class="free"><span>A</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><span>env_quotient_def</span><span> </span><a class="entity_ref" href="Quotients.html#Quotients.fun_quotient_subset_weak_intro|fact"><span>fun_quotient_subset_weak_intro</span></a><span> </span><a class="entity_ref" href="Quotients.html#Quotients.set_quotient_subset_weak|fact"><span>set_quotient_subset_weak</span></a><span class="main"><span>)</span></span><span>
  
</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="BTerm.algloc.env_subset_mod|fact"><span class="entity_def" id="BTerm.algloc.env_subset_mod|thm"><span>env_subset_mod</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>A</span></span><span> </span><span class="main"><span>⊆</span></span><span> </span><span class="free"><span>B</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><span class="free"><span>env1</span></span><span> </span><span class="main"><a class="entity_ref" href="Quotients.html#Quotients.qequals|const"><span>=</span></a></span><span> </span><span class="free"><span>env2</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Quotients.html#Quotients.qequals|const"><span>(mod</span></a></span><span> </span><span class="main"><span>𝔼</span></span><span> </span><span class="free"><span>B</span></span><span class="main"><a class="entity_ref" href="Quotients.html#Quotients.qequals|const"><span>)</span></a></span><span> </span><span class="main"><span>⟹</span></span><span> </span><span class="free"><span>env1</span></span><span> </span><span class="main"><a class="entity_ref" href="Quotients.html#Quotients.qequals|const"><span>=</span></a></span><span> </span><span class="free"><span>env2</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Quotients.html#Quotients.qequals|const"><span>(mod</span></a></span><span> </span><span class="main"><span>𝔼</span></span><span> </span><span class="free"><span>A</span></span><span class="main"><a class="entity_ref" href="Quotients.html#Quotients.qequals|const"><span>)</span></a></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>meson</span></span><span> </span><span>env_subset</span><span> </span><a class="entity_ref" href="Quotients.html#Quotients.qsubset_mod_weak|fact"><span>qsubset_mod_weak</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="BTerm.algloc.env_app|fact"><span class="entity_def" id="BTerm.algloc.env_app|thm"><span>env_app</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>i</span></span><span> </span><span class="main"><span>∈</span></span><span> </span><span class="free"><span>I</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><span class="free"><span>env1</span></span><span> </span><span class="main"><a class="entity_ref" href="Quotients.html#Quotients.qequals|const"><span>=</span></a></span><span> </span><span class="free"><span>env2</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Quotients.html#Quotients.qequals|const"><span>(mod</span></a></span><span> </span><span class="main"><span>𝔼</span></span><span> </span><span class="free"><span>I</span></span><span class="main"><a class="entity_ref" href="Quotients.html#Quotients.qequals|const"><span>)</span></a></span><span> </span><span class="main"><span>⟹</span></span><span> </span><span class="free"><span>env1</span></span><span> </span><span class="free"><span>i</span></span><span> </span><span class="main"><a class="entity_ref" href="Quotients.html#Quotients.qequals|const"><span>=</span></a></span><span> </span><span class="free"><span>env2</span></span><span> </span><span class="free"><span>i</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Quotients.html#Quotients.qequals|const"><span>(mod</span></a></span><span> </span><span class="keyword1"><span>𝒰</span></span><span class="main"><a class="entity_ref" href="Quotients.html#Quotients.qequals|const"><span>)</span></a></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><span>env_quotient_def</span><span> </span><a class="entity_ref" href="Quotients.html#Quotients.fun_quotient_app_mod|fact"><span>fun_quotient_app_mod</span></a><span> </span><a class="entity_ref" href="Quotients.html#Quotients.set_quotient_mod|fact"><span>set_quotient_mod</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="BTerm.algloc.env_mod|fact"><span class="entity_def" id="BTerm.algloc.env_mod|thm"><span>env_mod</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="free"><span>env1</span></span><span> </span><span class="main"><a class="entity_ref" href="Quotients.html#Quotients.qequals|const"><span>=</span></a></span><span> </span><span class="free"><span>env2</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Quotients.html#Quotients.qequals|const"><span>(mod</span></a></span><span> </span><span class="main"><span>𝔼</span></span><span> </span><span class="free"><span>I</span></span><span class="main"><a class="entity_ref" href="Quotients.html#Quotients.qequals|const"><span>)</span></a></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>∀</span></span><span> </span><span class="bound"><span>i</span></span><span> </span><span class="main"><span>∈</span></span><span> </span><span class="free"><span>I</span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>env1</span></span><span> </span><span class="bound"><span>i</span></span><span> </span><span class="main"><a class="entity_ref" href="Quotients.html#Quotients.qequals|const"><span>=</span></a></span><span> </span><span class="free"><span>env2</span></span><span> </span><span class="bound"><span>i</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Quotients.html#Quotients.qequals|const"><span>(mod</span></a></span><span> </span><span class="keyword1"><span>𝒰</span></span><span class="main"><a class="entity_ref" href="Quotients.html#Quotients.qequals|const"><span>)</span></a></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>smt</span></span><span> </span><span class="main"><span class="main"><span>(</span></span></span><span>verit</span><span class="main"><span class="main"><span>,</span></span></span><span> best</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><span>env_quotient_def</span><span> </span><a class="entity_ref" href="Quotients.html#Quotients.fun_quotient_mod|fact"><span>fun_quotient_mod</span></a><span> </span><a class="entity_ref" href="Quotients.html#Quotients.qequal_fun_def|fact"><span>qequal_fun_def</span></a><span> </span><a class="entity_ref" href="Quotients.html#Quotients.set_quotient_mod|fact"><span>set_quotient_mod</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>subsection</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>‹</span><span>Evaluation</span><span>›</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="BTerm.algloc.beval.elims|fact"><span class="entity_def" id="BTerm.algloc.beval.induct|fact"><span class="entity_def" id="BTerm.algloc.beval.simps|fact"><span class="entity_def" id="BTerm.algloc.beval.pelims|fact"><span class="entity_def" id="BTerm.algloc.beval.cases|fact"><span class="entity_def" id="BTerm.algloc.beval.termination|fact"><span class="entity_def" id="BTerm.algloc.beval.pinduct|fact"><span class="entity_def" id="BTerm.algloc.beval.psimps|fact"><span class="entity_def" id="BTerm.algloc.beval_rel.inducts|fact"><span class="entity_def" id="BTerm.algloc.beval_rel.simps|fact"><span class="entity_def" id="BTerm.algloc.beval_rel.induct|fact"><span class="entity_def" id="BTerm.algloc.beval_rel.cases|fact"><span class="entity_def" id="BTerm.algloc.beval_rel.intros|fact"><span class="entity_def" id="BTerm.algloc.beval_rel.cong|fact"><span class="entity_def" id="BTerm.algloc.beval_sumC.cong|fact"><span class="entity_def" id="BTerm.algloc.beval_graph.inducts|fact"><span class="entity_def" id="BTerm.algloc.beval_graph.simps|fact"><span class="entity_def" id="BTerm.algloc.beval_graph.induct|fact"><span class="entity_def" id="BTerm.algloc.beval_graph.cases|fact"><span class="entity_def" id="BTerm.algloc.beval_graph.intros|fact"><span class="entity_def" id="BTerm.algloc.beval_graph.cong|fact"><span class="entity_def" id="BTerm.algloc.beval.elims|thm"><span class="entity_def" id="BTerm.algloc.beval.induct|thm"><span class="entity_def" id="BTerm.algloc.beval.simps(3)|thm"><span class="entity_def" id="BTerm.algloc.beval.simps(2)|thm"><span class="entity_def" id="BTerm.algloc.beval.simps(1)|thm"><span class="entity_def" id="BTerm.algloc.beval.pelims|thm"><span class="entity_def" id="BTerm.algloc.beval.cases|thm"><span class="entity_def" id="BTerm.algloc.beval.termination|thm"><span class="entity_def" id="BTerm.algloc.beval.pinduct|thm"><span class="entity_def" id="BTerm.algloc.beval.psimps(3)|thm"><span class="entity_def" id="BTerm.algloc.beval.psimps(2)|thm"><span class="entity_def" id="BTerm.algloc.beval.psimps(1)|thm"><span class="entity_def" id="BTerm.algloc.beval_rel.inducts|thm"><span class="entity_def" id="BTerm.algloc.beval_rel.simps|thm"><span class="entity_def" id="BTerm.algloc.beval_rel.induct|thm"><span class="entity_def" id="BTerm.algloc.beval_rel.cases|thm"><span class="entity_def" id="BTerm.algloc.beval_rel.intros(2)|thm"><span class="entity_def" id="BTerm.algloc.beval_rel.intros(1)|thm"><span class="entity_def" id="BTerm.algloc.beval_rel.cong|thm"><span class="entity_def" id="BTerm.algloc.beval_sumC.cong|thm"><span class="entity_def" id="BTerm.algloc.beval_graph.inducts|thm"><span class="entity_def" id="BTerm.algloc.beval_graph.simps|thm"><span class="entity_def" id="BTerm.algloc.beval_graph.induct|thm"><span class="entity_def" id="BTerm.algloc.beval_graph.cases|thm"><span class="entity_def" id="BTerm.algloc.beval_graph.intros(3)|thm"><span class="entity_def" id="BTerm.algloc.beval_graph.intros(2)|thm"><span class="entity_def" id="BTerm.algloc.beval_graph.intros(1)|thm"><span class="entity_def" id="BTerm.algloc.beval_graph.cong|thm"><span class="entity_def" id="BTerm.algloc.beval_def|axiom"><span class="entity_def" id="BTerm.algloc.beval_rel_def|axiom"><span class="entity_def" id="BTerm.algloc.beval_sumC_def|axiom"><span class="entity_def" id="BTerm.algloc.beval_graph_def|axiom"><span class="entity_def" id="BTerm.algloc.beval_dom|const"><span class="entity_def" id="BTerm.algloc.beval_rel|const"><span class="entity_def" id="BTerm.algloc.beval_sumC|const"><span class="entity_def" id="BTerm.algloc.beval_graph|const"><span>fun</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span> </span><span class="entity"><span class="entity_def" id="BTerm.algloc.beval.cong|fact"><span class="entity_def" id="BTerm.algloc.beval.cong|thm"><span class="entity_def" id="BTerm.algloc.beval|const"><span>beval</span></span></span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="BTerm.html#BTerm.bterm|type"><span>bterm</span></a><span> </span><span class="main"><span>⇒</span></span><span> </span><span class="tfree"><span>'a</span></span><span> </span><a class="entity_ref" href="Valuation.html#Valuation.valuation|type"><span>valuation</span></a><span> </span><span class="main"><span>⇒</span></span><span> </span><span class="tfree"><span>'a</span></span><span> </span><a class="entity_ref" href="BTerm.html#BTerm.env|type"><span>env</span></a><span> </span><span class="main"><span>⇒</span></span><span> </span><span class="tfree"><span>'a</span></span><span>"</span></span></span><span> </span><span class="main"><span>(</span></span><span class="quoted"><span>"</span><span class="keyword1"><span>⟨</span></span><span>_</span><span class="keyword1"><span>;</span></span><span> </span><span>_</span><span class="keyword1"><span>,</span></span><span> </span><span>_</span><span class="keyword1"><span>⟩</span></span><span>"</span></span><span class="main"><span>)</span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span>
  </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>beval</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="BTerm.html#BTerm.bterm.FreeVar|const"><span>FreeVar</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>x</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>ts</span></span></span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>υ</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>env</span></span></span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>υ</span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span class="bound"><span class="entity"><span>x</span></span></span></span><span class="main"><span>,</span></span><span> </span><span>length</span><span> </span><span class="free"><span class="bound"><span class="entity"><span>ts</span></span></span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="keyword1"><span>§map</span></span><span> </span><span class="bound"><span>t</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>ts</span></span></span></span><span class="main"><span>!</span></span><span class="main"><span class="bound"><span>_</span></span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>beval</span></span><span> </span><span class="bound"><span>t</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>υ</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>env</span></span></span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
</span><span class="main"><span>|</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>beval</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="BTerm.html#BTerm.bterm.BoundVar|const"><span>BoundVar</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>i</span></span></span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>υ</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>env</span></span></span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>env</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>i</span></span></span></span><span>"</span></span></span><span> 
</span><span class="main"><span>|</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>beval</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="BTerm.html#BTerm.bterm.Abstr|const"><span>Abstr</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>a</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>ts</span></span></span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>υ</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>env</span></span></span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>(</span></span><span class="keyword1"><span>𝒪</span></span><span class="main"><a class="entity_ref" href="General.html#General.map_forced_get|const"><span>!!</span></a></span><span class="free"><span class="bound"><span class="entity"><span>a</span></span></span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="keyword1"><span>§map</span></span><span> </span><span class="bound"><span>t</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>ts</span></span></span></span><span class="main"><span>!</span></span><span class="bound"><span>i</span></span><span class="main"><span>.</span></span><span> 
     </span><span class="main"><span>(</span></span><span class="main"><span>λ</span></span><span> </span><span class="bound"><span>us</span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>beval</span></span><span> </span><span class="bound"><span>t</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>υ</span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span class="bound"><span class="entity"><span>env</span></span></span></span><span> </span><span class="main"><a class="entity_ref" href="BTerm.html#BTerm.update_env|const"><span>↑</span></a></span><span> </span><span class="keyword1"><span>§v</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>a</span></span></span></span><span> </span><span class="main"><a class="entity_ref" href="BTerm.html#BTerm.update_env|const"><span>{</span></a></span><span class="free"><span class="bound"><span class="entity"><span>a</span></span></span></span><span class="main"><span>!♮</span></span><span class="bound"><span>i</span></span><span> </span><span class="main"><a class="entity_ref" href="BTerm.html#BTerm.update_env|const"><span>:=</span></a></span><span> </span><span class="bound"><span>us</span></span><span class="main"><a class="entity_ref" href="BTerm.html#BTerm.update_env|const"><span>}</span></a></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> 

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="BTerm.algloc.beval_modulo|fact"><span class="entity_def" id="BTerm.algloc.beval_modulo|thm"><span>beval_modulo</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="quoted"><span class="quoted"><span>"</span><span>bwf</span><span> </span><span class="free"><span>t</span></span><span> </span><span class="main"><span>⟹</span></span><span>
   </span><a class="entity_ref" href="BTerm.html#BTerm.sigloc.bfrees|const"><span>bfrees</span></a><span> </span><span class="free"><span>t</span></span><span> </span><span class="main"><span>⊆</span></span><span> </span><span class="free"><span>X</span></span><span> </span><span class="main"><span>⟹</span></span><span> 
   </span><span class="free"><span>τ</span></span><span> </span><span class="main"><a class="entity_ref" href="Quotients.html#Quotients.qequals|const"><span>=</span></a></span><span> </span><span class="free"><span>υ</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Quotients.html#Quotients.qequals|const"><span>(mod</span></a></span><span> </span><span class="main"><span>𝕍</span></span><span> </span><span class="free"><span>X</span></span><span class="main"><a class="entity_ref" href="Quotients.html#Quotients.qequals|const"><span>)</span></a></span><span> </span><span class="main"><span>⟹</span></span><span> 
   </span><span>unbounds</span><span> </span><span class="free"><span>t</span></span><span> </span><span class="main"><span>⊆</span></span><span> </span><span class="free"><span>I</span></span><span> </span><span class="main"><span>⟹</span></span><span>
   </span><span class="free"><span>env1</span></span><span> </span><span class="main"><a class="entity_ref" href="Quotients.html#Quotients.qequals|const"><span>=</span></a></span><span> </span><span class="free"><span>env2</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Quotients.html#Quotients.qequals|const"><span>(mod</span></a></span><span> </span><span class="main"><span>𝔼</span></span><span> </span><span class="free"><span>I</span></span><span class="main"><a class="entity_ref" href="Quotients.html#Quotients.qequals|const"><span>)</span></a></span><span> </span><span class="main"><span>⟹</span></span><span>
   </span><span>beval</span><span> </span><span class="free"><span>t</span></span><span> </span><span class="free"><span>τ</span></span><span> </span><span class="free"><span>env1</span></span><span> </span><span class="main"><a class="entity_ref" href="Quotients.html#Quotients.qequals|const"><span>=</span></a></span><span> </span><span>beval</span><span> </span><span class="free"><span>t</span></span><span> </span><span class="free"><span>υ</span></span><span> </span><span class="free"><span>env2</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Quotients.html#Quotients.qequals|const"><span>(mod</span></a></span><span> </span><span class="keyword1"><span>𝒰</span></span><span class="main"><a class="entity_ref" href="Quotients.html#Quotients.qequals|const"><span>)</span></a></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>induct</span></span><span> </span><span class="quoted"><span class="free"><span>t</span></span></span><span> </span><span class="quasi_keyword"><span>arbitrary</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><span class="quoted"><span class="free"><span>env1</span></span></span><span> </span><span class="quoted"><span class="free"><span>env2</span></span></span><span> </span><span class="quoted"><span class="free"><span>I</span></span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span class="main"><span>(</span></span><span>FreeVar</span><span> </span><span class="skolem"><span>x</span></span><span> </span><span class="skolem"><span>ts</span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="skolem"><span>x</span></span><span class="main"><span>,</span></span><span> </span><span>length</span><span> </span><span class="skolem"><span>ts</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>∈</span></span><span> </span><a class="entity_ref" href="BTerm.html#BTerm.sigloc.bfrees|const"><span>bfrees</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="BTerm.html#BTerm.bterm.FreeVar|const"><span>FreeVar</span></a><span> </span><span class="skolem"><span>x</span></span><span> </span><span class="skolem"><span>ts</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="General.html#General.union_indexed_fold|fact"><span>union_indexed_fold</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span>x</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="skolem"><span>x</span></span><span class="main"><span>,</span></span><span> </span><span>length</span><span> </span><span class="skolem"><span>ts</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>∈</span></span><span> </span><span class="free"><span>X</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><span>FreeVar.prems</span><span class="main"><span>(</span></span><span>2</span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>blast</span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span>bfrees</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>⋀</span></span><span> </span><span class="bound"><span>i</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>i</span></span><span> </span><span class="main"><span>&lt;</span></span><span> </span><span>length</span><span> </span><span class="skolem"><span>ts</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><a class="entity_ref" href="BTerm.html#BTerm.sigloc.bfrees|const"><span>bfrees</span></a><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>ts</span></span><span> </span><span class="main"><span>!</span></span><span> </span><span class="bound"><span>i</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>⊆</span></span><span> </span><span class="free"><span>X</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><span>bfrees_freeVar_arg</span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><span>FreeVar.prems</span><span class="main"><span>(</span></span><span>2</span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>blast</span></span><span>
  </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?case</span></span></span></span><span> </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="operator"><span>simp</span></span><span> 
    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>rule</span></span><span> </span><a class="entity_ref" href="Valuation.html#Valuation.valuation_quotient_app|fact"><span>valuation_quotient_app</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="keyword2"><span class="keyword"><span class="operator"><span>where</span></span></span></span><span> X</span><span class="main"><span class="main"><span class="main"><span>=</span></span></span></span><span class="quoted"><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span class="free"><span>X</span></span></span><span>"</span></span></span></span><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><span>FreeVar</span><span> </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><span>x</span><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Quotients.html#Quotients.vector_quotient_mod|fact"><span>vector_quotient_mod</span></a><span> </span><a class="entity_ref" href="Quotients.html#Quotients.qequal_vector_def|fact"><span>qequal_vector_def</span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>rule</span></span><span> </span><span>FreeVar</span><span class="main"><span class="main"><span>(</span></span></span><span>1</span><span class="main"><span class="main"><span>)</span></span></span><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>erule</span></span><span> </span><span>bwf_freeVar_arg</span><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>OF</span></span><span> </span><span>FreeVar.prems</span><span class="main"><span class="main"><span>(</span></span></span><span>1</span><span class="main"><span class="main"><span>)</span></span></span><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>erule</span></span><span> </span><span>bfrees</span><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><span>FreeVar</span><span> </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="operator"><span>force</span></span><span>
    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>rule</span></span><span> </span><span>env_subset_mod</span><span class="main"><span class="main"><span>[</span></span></span><span class="keyword2"><span class="keyword"><span class="operator"><span>where</span></span></span></span><span> B </span><span class="main"><span class="main"><span class="main"><span>=</span></span></span></span><span> </span><span class="quoted"><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span class="skolem"><span>I</span></span></span><span>"</span></span></span></span><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>meson</span></span><span> </span><span>FreeVar.prems</span><span class="main"><span class="main"><span>(</span></span></span><span>4</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="BTerm.html#BTerm.sigloc.unbounds_freeVar_arg|fact"><span>sigloc.unbounds_freeVar_arg</span></a><span> </span><span>subset_trans</span><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><span>FreeVar</span><span> </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>done</span></span></span></span></span><span>
</span><span class="keyword1"><span class="command"><span>next</span></span></span><span>
  </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span class="main"><span>(</span></span><span>BoundVar</span><span> </span><span class="skolem"><span>i</span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span>i</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>i</span></span><span> </span><span class="main"><span>∈</span></span><span> </span><span class="skolem"><span>I</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><span>BoundVar.prems</span><span class="main"><span>(</span></span><span>4</span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>auto</span></span><span>
  </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?case</span></span></span></span><span> 
    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="operator"><span>simp</span></span><span> 
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><span>BoundVar</span><span> </span><span>i</span><span> </span><span>env_app</span><span> 
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>force</span></span><span>
</span><span class="keyword1"><span class="command"><span>next</span></span></span><span>
  </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span class="main"><span>(</span></span><span>Abstr</span><span> </span><span class="skolem"><span>a</span></span><span> </span><span class="skolem"><span>ts</span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span>valid</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>✓</span></span><span> </span><span class="skolem"><span>a</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><span>Abstr.prems</span><span class="main"><span>(</span></span><span>1</span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>force</span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span>length_ts</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="keyword1"><span>§a</span></span><span> </span><span class="skolem"><span>a</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span>length</span><span> </span><span class="skolem"><span>ts</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><span>Abstr.prems</span><span class="main"><span>(</span></span><span>1</span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>force</span></span><span>
  </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?case</span></span></span></span><span> 
    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>rule</span></span><span> </span><a class="entity_ref" href="Algebra.html#Algebra.operator_appeq_intro|fact"><span>operator_appeq_intro</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>of</span></span><span> </span><span class="quoted"><span class="quoted"><span class="quoted"><span>"</span><span class="keyword1"><span class="keyword1"><span>𝒪</span></span></span><span> </span><span class="main"><a class="entity_ref" href="General.html#General.map_forced_get|const"><span class="main"><a class="entity_ref" href="General.html#General.map_forced_get|const"><span>!!</span></a></span></a></span><span> </span><span class="skolem"><span class="skolem"><span>a</span></span></span><span>"</span></span></span></span><span> </span><span class="quoted"><span class="keyword1"><span class="quoted"><span class="keyword1"><span>𝒰</span></span></span></span></span><span> </span><span class="quoted"><span class="quoted"><span class="quoted"><span>"</span><span class="keyword1"><span class="keyword1"><span>𝒮</span></span></span><span> </span><span class="main"><a class="entity_ref" href="General.html#General.map_forced_get|const"><span class="main"><a class="entity_ref" href="General.html#General.map_forced_get|const"><span>!!</span></a></span></a></span><span> </span><span class="skolem"><span class="skolem"><span>a</span></span></span><span>"</span></span></span></span><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><span>valid</span><span> </span><span>valid_in_operators</span><span> </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="operator"><span>force</span></span><span>
    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><span>length_ts</span><span class="main"><span>)</span></span><span class="main"><span class="keyword3"><span>+</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Algebra.html#Algebra.operations_mod|fact"><span>operations_mod</span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>rule</span></span><span> </span><span>Abstr</span><span class="main"><span class="main"><span>(</span></span></span><span>1</span><span class="main"><span class="main"><span>)</span></span></span><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><span>Abstr.prems</span><span class="main"><span>(</span></span><span>1</span><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="BTerm.html#BTerm.sigloc.bwf_abstr_arg|fact"><span>sigloc.bwf_abstr_arg</span></a><span> </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="operator"><span>blast</span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><span>Abstr.prems</span><span class="main"><span>(</span></span><span>2</span><span class="main"><span>)</span></span><span> </span><span>bfrees_abstr_arg</span><span> </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="operator"><span>blast</span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><span>Abstr.prems</span><span class="main"><span>(</span></span><span>3</span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="operator"><span>blast</span></span><span>
    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>rule</span></span><span> </span><span>unbounds_bwf_abstr</span><span class="main"><span class="main"><span>[</span></span></span><span class="keyword2"><span class="keyword"><span class="operator"><span>where</span></span></span></span><span> a</span><span class="main"><span class="main"><span class="main"><span>=</span></span></span></span><span class="quoted"><span class="skolem"><span class="quoted"><span class="skolem"><span>a</span></span></span></span></span><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span class="keyword3"><span>,</span></span></span><span> </span><span class="operator"><span>simp</span></span><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><span>Abstr</span><span> </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>auto</span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><span>env_mod</span><span> </span><a class="entity_ref" href="General.html#General.union_unindexed_fold|fact"><span>union_unindexed_fold</span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>subst</span></span><span> </span><a class="entity_ref" href="BTerm.html#BTerm.env_app_noupdate|fact"><span>env_app_noupdate</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="keyword2"><span class="keyword"><span class="operator"><span>where</span></span></span></span><span> env</span><span class="main"><span class="main"><span class="main"><span>=</span></span></span></span><span class="quoted"><span class="skolem"><span class="quoted"><span class="skolem"><span>env1</span></span></span></span></span><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><span>length_ts</span><span> </span><span>finite_shape_deps</span><span> </span><span>valid</span><span> </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="operator"><span>presburger</span></span><span>
    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><span class="main"><span class="main"><span>(</span></span></span><span>no_types</span><span class="main"><span class="main"><span>,</span></span></span><span> lifting</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><span>erase_bottom_indices</span><span> </span><span>length_ts</span><span> </span><span>linorder_not_le</span><span> </span><a class="entity_ref" href="Shape.html#Shape.shape_deps_valence|fact"><span>shape_deps_valence</span></a><span class="main"><span>)</span></span><span> 
    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>subst</span></span><span> </span><a class="entity_ref" href="BTerm.html#BTerm.env_app_noupdate|fact"><span>env_app_noupdate</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="keyword2"><span class="keyword"><span class="operator"><span>where</span></span></span></span><span> env</span><span class="main"><span class="main"><span class="main"><span>=</span></span></span></span><span class="quoted"><span class="skolem"><span class="quoted"><span class="skolem"><span>env2</span></span></span></span></span><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><span>length_ts</span><span> </span><span>finite_shape_deps</span><span> </span><span>valid</span><span> </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="operator"><span>presburger</span></span><span>
    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><span class="main"><span class="main"><span>(</span></span></span><span>no_types</span><span class="main"><span class="main"><span>,</span></span></span><span> lifting</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><span>erase_bottom_indices</span><span> </span><span>length_ts</span><span> </span><span>linorder_not_le</span><span> </span><a class="entity_ref" href="Shape.html#Shape.shape_deps_valence|fact"><span>shape_deps_valence</span></a><span class="main"><span>)</span></span><span> 
    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="BTerm.html#BTerm.env_raised_app|fact"><span>env_raised_app</span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>rule</span></span><span> </span><span>env_app</span><span class="main"><span class="main"><span>[</span></span></span><span class="keyword2"><span class="keyword"><span class="operator"><span>where</span></span></span></span><span> I</span><span class="main"><span class="main"><span class="main"><span>=</span></span></span></span><span class="quoted"><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span class="skolem"><span>I</span></span></span><span>"</span></span></span></span><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><span>upper_bound_unbounds_abstr_arg</span><span> </span><span>erase_bottom_indices</span><span>
    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>metis</span></span><span> </span><span class="main"><span class="main"><span>(</span></span></span><span>no_types</span><span class="main"><span class="main"><span>,</span></span></span><span> lifting</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><span>Abstr.prems</span><span class="main"><span class="main"><span>(</span></span></span><span>4</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><span>subset_eq</span><span> </span><span>undo_raise_indices</span><span> 
           </span><span>upper_bound_erased_unbounds_abstr_arg</span><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><span>Abstr</span><span> </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>subst</span></span><span> </span><a class="entity_ref" href="BTerm.html#BTerm.env_app_update|fact"><span>env_app_update</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="keyword2"><span class="keyword"><span class="operator"><span>where</span></span></span></span><span> env</span><span class="main"><span class="main"><span class="main"><span>=</span></span></span></span><span class="quoted"><span class="skolem"><span class="quoted"><span class="skolem"><span>env1</span></span></span></span></span><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><span>finite_shape_deps</span><span> </span><span>length_ts</span><span> </span><span>valid</span><span> </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="operator"><span>presburger</span></span><span>
    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>subst</span></span><span> </span><a class="entity_ref" href="BTerm.html#BTerm.env_app_update|fact"><span>env_app_update</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="keyword2"><span class="keyword"><span class="operator"><span>where</span></span></span></span><span> env</span><span class="main"><span class="main"><span class="main"><span>=</span></span></span></span><span class="quoted"><span class="skolem"><span class="quoted"><span class="skolem"><span>env2</span></span></span></span></span><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><span>finite_shape_deps</span><span> </span><span>length_ts</span><span> </span><span>valid</span><span> </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="operator"><span>presburger</span></span><span>
    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>rule</span></span><span>  </span><a class="entity_ref" href="Quotients.html#Quotients.vector_quotient_nth_mod|fact"><span>vector_quotient_nth_mod</span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="operator"><span>auto</span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><span>valid</span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><span>length_ts</span><span> </span><a class="entity_ref" href="Locales.html#Locales.sigloc.finite_shape_deps|fact"><span>sigloc.finite_shape_deps</span></a><span> </span><a class="entity_ref" href="General.html#General.upper_bound_index_sorted_list|fact"><span>upper_bound_index_sorted_list</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>presburger</span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword2"><span class="keyword"><span>end</span></span></span><span>

</span><span class="keyword2"><span class="keyword"><span>end</span></span></span></pre>
</body>

</html>